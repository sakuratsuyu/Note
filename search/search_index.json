{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u3053\u3053\u306f \u2014\u2014 \u306a\u3093\u3068! \u00b6 A note book by @sakuratsuyu. \u5076\u5c14\u5199\u70b9\u4e1c\u897f\uff0c\u5e0c\u671b\u4f60\u559c\u6b22\u3002 \\[ \\tt{Transfering\\ content\\ from\\ other\\ places\\ these\\ days\\ } \\cdots\\ \\&\\$@\\%\\&\\$@\\%\\&\\$@\\% \\] About me All ids I used: sakuratsuyu , \u685c\u3064\u3086 , \u66e6\u9732 and Mslease . Maybe you can find me somewhere else! Sophomore as a ZJU CS Undergraduate. ZJUSCT Freshman. (\u6478\u5927\u9c7c) MADer. (MAD \u5728\u505a\u4e86\u5728\u505a\u4e86.jpg) Hope you can find anything useful and interesting here! \u2728\u30ad\u30e9\u30ad\u30e9\u76ee\u2728","title":"\u3053\u3053\u306f \u2014\u2014 \u306a\u3093\u3068!"},{"location":"#_1","text":"A note book by @sakuratsuyu. \u5076\u5c14\u5199\u70b9\u4e1c\u897f\uff0c\u5e0c\u671b\u4f60\u559c\u6b22\u3002 \\[ \\tt{Transfering\\ content\\ from\\ other\\ places\\ these\\ days\\ } \\cdots\\ \\&\\$@\\%\\&\\$@\\%\\&\\$@\\% \\] About me All ids I used: sakuratsuyu , \u685c\u3064\u3086 , \u66e6\u9732 and Mslease . Maybe you can find me somewhere else! Sophomore as a ZJU CS Undergraduate. ZJUSCT Freshman. (\u6478\u5927\u9c7c) MADer. (MAD \u5728\u505a\u4e86\u5728\u505a\u4e86.jpg) Hope you can find anything useful and interesting here! \u2728\u30ad\u30e9\u30ad\u30e9\u76ee\u2728","title":"\u3053\u3053\u306f \u2014\u2014 \u306a\u3093\u3068!"},{"location":"comming_soon/","text":"Waiting... \u00b6 Failure Things there are comming soon.","title":"Waiting..."},{"location":"comming_soon/#waiting","text":"Failure Things there are comming soon.","title":"Waiting..."},{"location":"discussion/","text":"Discussion \u00b6 Free talk here about anything! Maybe I can put some blogrolls there... Anyone wants? Blogrolls wants more friends! Isshiki \u4fee's Notebook","title":"Blogroll"},{"location":"discussion/#discussion","text":"Free talk here about anything! Maybe I can put some blogrolls there... Anyone wants? Blogrolls wants more friends! Isshiki \u4fee's Notebook","title":"Discussion"},{"location":"tasklist/","text":"Task List \u00b6 Make a logo! Mathematics Basis Discrete Mathematics | DM Numerical Analysis | NA Abstract Algrebra Computer Science Courses The Missing Semester of your CS education \u2192 Cheat Sheets / Tools Introduction to Computer Systems | ICS HPC 101 Introduction to Computer Vision | ICV Fundemental of Data Strcuture | FDS Digital Logic Design Cheat Sheets / Tools Git Markdown Latex Vim / Neovim Shell Data Wrangling Profiling Pot-pourri Simple Cryptography Guidance to Configure Manjaro + i3wm","title":"Plan"},{"location":"tasklist/#task-list","text":"Make a logo! Mathematics Basis Discrete Mathematics | DM Numerical Analysis | NA Abstract Algrebra Computer Science Courses The Missing Semester of your CS education \u2192 Cheat Sheets / Tools Introduction to Computer Systems | ICS HPC 101 Introduction to Computer Vision | ICV Fundemental of Data Strcuture | FDS Digital Logic Design Cheat Sheets / Tools Git Markdown Latex Vim / Neovim Shell Data Wrangling Profiling Pot-pourri Simple Cryptography Guidance to Configure Manjaro + i3wm","title":"Task List"},{"location":"Computer_Science_Courses/","text":"Title Page \u00b6 Abstract This section stores the notes of the courses that I've learned from ZJU or other platforms like MIT and Standford. It helps me to build my knowledge system and hope it helps you too. Welcome to point out anything wrong and careless mistakes!","title":"Title Page"},{"location":"Computer_Science_Courses/#title-page","text":"Abstract This section stores the notes of the courses that I've learned from ZJU or other platforms like MIT and Standford. It helps me to build my knowledge system and hope it helps you too. Welcome to point out anything wrong and careless mistakes!","title":"Title Page"},{"location":"Computer_Science_Courses/ICV/10_Recognition/","text":"","title":"Lecture 10"},{"location":"Computer_Science_Courses/ICV/11_3D_Deep_Learning/","text":"","title":"Lecture 11"},{"location":"Computer_Science_Courses/ICV/12_13_Computational_Photography/","text":"","title":"Lecture 12/13"},{"location":"Computer_Science_Courses/ICV/1_Introduction/","text":"Lecture 1 Introduction \u00b6 Review of Linear Algrebra \u00b6 Affine Transformations \u4eff\u5c04\u53d8\u6362 \u00b6 Affine map = linear map + translation \\[ \\begin{bmatrix} x' \\\\ y' \\end{bmatrix} = \\begin{bmatrix} a & b \\\\ c & d \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\end{bmatrix} + \\begin{bmatrix} t_x \\\\ t_y \\end{bmatrix} \\] Using homogenous coordinates \uff08\u9f50\u6b21\u5750\u6807\uff09 \\[ \\begin{bmatrix} x' \\\\ y' \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} a & b & t_x \\\\ c & d & t_y \\\\ 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} \\] Eigenvectors and Eigenvalues \u00b6 The eigenvalues of symmetric matrices are real numbers. The eigenvalues of positive definite matrices are positive numbers.","title":"Lecture 1"},{"location":"Computer_Science_Courses/ICV/1_Introduction/#lecture-1-introduction","text":"","title":"Lecture 1 Introduction"},{"location":"Computer_Science_Courses/ICV/1_Introduction/#review-of-linear-algrebra","text":"","title":"Review of Linear Algrebra"},{"location":"Computer_Science_Courses/ICV/1_Introduction/#affine-transformations","text":"Affine map = linear map + translation \\[ \\begin{bmatrix} x' \\\\ y' \\end{bmatrix} = \\begin{bmatrix} a & b \\\\ c & d \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\end{bmatrix} + \\begin{bmatrix} t_x \\\\ t_y \\end{bmatrix} \\] Using homogenous coordinates \uff08\u9f50\u6b21\u5750\u6807\uff09 \\[ \\begin{bmatrix} x' \\\\ y' \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} a & b & t_x \\\\ c & d & t_y \\\\ 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} \\]","title":"Affine Transformations \u4eff\u5c04\u53d8\u6362"},{"location":"Computer_Science_Courses/ICV/1_Introduction/#eigenvectors-and-eigenvalues","text":"The eigenvalues of symmetric matrices are real numbers. The eigenvalues of positive definite matrices are positive numbers.","title":"Eigenvectors and Eigenvalues"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/","text":"Lecture 2 Image Formation \u00b6 Camera and Lens \u00b6 Pinhole Camera \u00b6 A barrier to block off most of the rays. The opening is the aperture \u5149\u5708 . Flaws Less light gets through. Diffraction effects\uff08\u884d\u5c04\uff09 Lens \u900f\u955c \u00b6 \\[ \\frac{1}{i} + \\frac{1}{o} = \\frac{1}{f} \\] Focal length \\(f\\) \u7126\u8ddd \u00b6 if \\(o = \\infty\\) , then \\(f = i\\) . Magnification \\(m\\) \u653e\u5927\u7387 \u00b6 \\[ m = \\frac{h_i}{h_o} \\] Field of View (FOV) \u89c6\u91ce \u00b6 Factor \u00b6 Focal Length Longer focal length, Narrower angle of view. Vice versa. Note 50mm / 46\u00b0 (and full frame) is the most similar FOV with human eyes. Thus 50mm lens is called standard lens \uff08\u6807\u51c6\u955c\u5934\uff09. telephoto lens \uff08\u957f\u7126\u955c\u5934\uff0c\u671b\u8fdc\u955c\u5934\uff09\uff1a\u89c6\u91ce\u5c0f\uff0c\u653e\u5927\u7387\u5927 short focal lens \uff08\u77ed\u7126\u955c\u5934\uff0c\u5e7f\u89d2\u955c\u5934\uff09\uff1a\u89c6\u91ce\u5927\uff0c\u653e\u5927\u7387\u5c0f Sensor Size Bigger sensor size, Wider angle of view. Vice versa. Aperture \u5149\u5708 \u00b6 The representation of aperture is its Diameter \\(D\\) . F-Number \\[ N = \\frac{f}{D} \\text{ (mostly greater than 1, around 1.8 ~ 22)} \\] Lens Defocus \u00b6 Blur Circle Diameter (\u5149\u6591\u534a\u5f84) \\[ b = \\frac{D}{i'}|i' -i|, b \\propto D \\propto \\frac{1}{N} \\] Focusing \u5bf9\u7126 \u00b6 Depth of Field (DoF) \u666f\u6df1 \u00b6 \\[ {\\tt DoF} = o_2 - o_1 = \\frac{2of^2cN(o-f)}{f^4-c^2N^2(o-f)^2} \\] From the equation above DoF is almost proportional to \\(N\\) , and thus the Larger aperture, the Smaller F-Number and the Smaller DoF. How to blur the background \u00b6 Large aperture Long focal length Near foreground Far background Geometric Image Formation\uff08\u5b9a\u4f4d\uff09 \u00b6 Camera model \\[ \\begin{bmatrix} u \\\\ v \\end{bmatrix} = \\begin{bmatrix} f \\frac{x}{z} \\\\ f \\frac{y}{z} \\end{bmatrix} \\] Homogeneous Coordinates / Projective Coordinates \u00b6 Suppose that \\(\\begin{bmatrix} x \\\\ y \\\\ w \\end{bmatrix}\\) is the same as \\(\\begin{bmatrix} x/w \\\\ y/w \\\\ 1 \\end{bmatrix}\\) , then we get \\[ \\begin{bmatrix} f & 0 & 0 & 0 \\\\ 0 & f & 0 & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ z \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} fx \\\\ fy \\\\ z \\\\ \\end{bmatrix} \\cong \\begin{bmatrix} f\\frac{x}{z} \\\\ f\\frac{y}{z} \\\\ 1 \\end{bmatrix} \\] We can also put the image plane in front of the camera (opposite to the previous picture). Perspective Projection \u00b6 Preserevd - Straight lines are still straight Lost - Length and Angle Vanishing Points \u00b6 Properties Any wo parallel lines have the same vanishing point v. v can be outside the image frame or at infinity. Line from C to v is parallel to the lines. Vanishing Lines \u00b6 Multiple vanishing points The direction of the vanishing line tells us the orientation of the plane. Distortion \u00b6 Converging verticals Problem and Solution (View Camera \u79fb\u8f74\u76f8\u673a) Exterior columns appear bigger Due to lens flaws Radial distortion Due to imperfect lens \\[ \\begin{align} r^2 &= {x'}_n^{2} + {y'}_n^{2} \\\\ {x'}_d &= {x'}_n(1 + \\kappa_1r^2 + \\kappa_2r^4) \\\\ {y'}_d &= {y'}_n(1 + \\kappa_1r^2 + \\kappa_2r^4) \\\\ \\end{align} \\] Solution Take a photo of a grid at the same point and then use the mathmatics to calculate and correct radial distortion. Orthographic Projection \u00b6 \\[ \\begin{bmatrix} 1 & 0 & 0 & 0 \\\\ 0 & 1 & 0 & 0 \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ z \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} x \\\\ y \\\\ 1 \\\\ \\end{bmatrix} \\Rightarrow (x, y) \\] Photometric Image Formation\uff08\u5b9a\u989c\u8272/\u4eae\u5ea6\uff09 \u00b6 Image Sensor \u00b6 CMOS CCD (Charge Coupled Device) Shutter \u00b6 Shutter speed controls exposure time. Color Sensing \u00b6 Color Spaces RGB HSV Practical Color Sensing: Bayer Filter Shading \u7740\u8272 \u00b6 BRDF (Bidirectional Reflectance Distribution Function) \u00b6 \\[ L_r(\\hat{\\textbf{v}_r};\\lambda) = \\int L_i(\\hat{\\textbf{i}_r};\\lambda)f_r(\\hat{\\textbf{v}_r}, \\hat{\\textbf{v}_i}, \\hat{\\textbf{n}}; \\lambda)\\cos^+\\theta_i\\ d\\hat{\\textbf{v}_i} \\] Diffuse (Lambertian) Reflection \u00b6 Shading independent of view direction Specular Term \u00b6 Intensity depends on view direction Blinn-Phong Reflection Model \u00b6 \\[ L = L_a + L_d + L_s = k_aI_a + k_d(I/r^2)\\max(0, \\textbf{n}\\cdot\\textbf{l}) + k_s(I/r^2)\\max(0, \\textbf{n}\\cdot\\textbf{h})^p \\]","title":"Lecture 2"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#lecture-2-image-formation","text":"","title":"Lecture 2 Image Formation"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#camera-and-lens","text":"","title":"Camera and Lens"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#pinhole-camera","text":"A barrier to block off most of the rays. The opening is the aperture \u5149\u5708 . Flaws Less light gets through. Diffraction effects\uff08\u884d\u5c04\uff09","title":"Pinhole Camera"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#lens","text":"\\[ \\frac{1}{i} + \\frac{1}{o} = \\frac{1}{f} \\]","title":"Lens \u900f\u955c"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#focal-length-f","text":"if \\(o = \\infty\\) , then \\(f = i\\) .","title":"Focal length \\(f\\)  \u7126\u8ddd"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#magnification-m","text":"\\[ m = \\frac{h_i}{h_o} \\]","title":"Magnification \\(m\\) \u653e\u5927\u7387"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#field-of-view-fov","text":"","title":"Field of View (FOV) \u89c6\u91ce"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#factor","text":"Focal Length Longer focal length, Narrower angle of view. Vice versa. Note 50mm / 46\u00b0 (and full frame) is the most similar FOV with human eyes. Thus 50mm lens is called standard lens \uff08\u6807\u51c6\u955c\u5934\uff09. telephoto lens \uff08\u957f\u7126\u955c\u5934\uff0c\u671b\u8fdc\u955c\u5934\uff09\uff1a\u89c6\u91ce\u5c0f\uff0c\u653e\u5927\u7387\u5927 short focal lens \uff08\u77ed\u7126\u955c\u5934\uff0c\u5e7f\u89d2\u955c\u5934\uff09\uff1a\u89c6\u91ce\u5927\uff0c\u653e\u5927\u7387\u5c0f Sensor Size Bigger sensor size, Wider angle of view. Vice versa.","title":"Factor"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#aperture","text":"The representation of aperture is its Diameter \\(D\\) . F-Number \\[ N = \\frac{f}{D} \\text{ (mostly greater than 1, around 1.8 ~ 22)} \\]","title":"Aperture \u5149\u5708"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#lens-defocus","text":"Blur Circle Diameter (\u5149\u6591\u534a\u5f84) \\[ b = \\frac{D}{i'}|i' -i|, b \\propto D \\propto \\frac{1}{N} \\]","title":"Lens Defocus"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#focusing","text":"","title":"Focusing \u5bf9\u7126"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#depth-of-field-dof","text":"\\[ {\\tt DoF} = o_2 - o_1 = \\frac{2of^2cN(o-f)}{f^4-c^2N^2(o-f)^2} \\] From the equation above DoF is almost proportional to \\(N\\) , and thus the Larger aperture, the Smaller F-Number and the Smaller DoF.","title":"Depth of Field (DoF) \u666f\u6df1"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#how-to-blur-the-background","text":"Large aperture Long focal length Near foreground Far background","title":"How to blur the background"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#geometric-image-formation","text":"Camera model \\[ \\begin{bmatrix} u \\\\ v \\end{bmatrix} = \\begin{bmatrix} f \\frac{x}{z} \\\\ f \\frac{y}{z} \\end{bmatrix} \\]","title":"Geometric Image Formation\uff08\u5b9a\u4f4d\uff09"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#homogeneous-coordinates-projective-coordinates","text":"Suppose that \\(\\begin{bmatrix} x \\\\ y \\\\ w \\end{bmatrix}\\) is the same as \\(\\begin{bmatrix} x/w \\\\ y/w \\\\ 1 \\end{bmatrix}\\) , then we get \\[ \\begin{bmatrix} f & 0 & 0 & 0 \\\\ 0 & f & 0 & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ z \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} fx \\\\ fy \\\\ z \\\\ \\end{bmatrix} \\cong \\begin{bmatrix} f\\frac{x}{z} \\\\ f\\frac{y}{z} \\\\ 1 \\end{bmatrix} \\] We can also put the image plane in front of the camera (opposite to the previous picture).","title":"Homogeneous Coordinates / Projective Coordinates"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#perspective-projection","text":"Preserevd - Straight lines are still straight Lost - Length and Angle","title":"Perspective Projection"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#vanishing-points","text":"Properties Any wo parallel lines have the same vanishing point v. v can be outside the image frame or at infinity. Line from C to v is parallel to the lines.","title":"Vanishing Points"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#vanishing-lines","text":"Multiple vanishing points The direction of the vanishing line tells us the orientation of the plane.","title":"Vanishing Lines"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#distortion","text":"Converging verticals Problem and Solution (View Camera \u79fb\u8f74\u76f8\u673a) Exterior columns appear bigger Due to lens flaws Radial distortion Due to imperfect lens \\[ \\begin{align} r^2 &= {x'}_n^{2} + {y'}_n^{2} \\\\ {x'}_d &= {x'}_n(1 + \\kappa_1r^2 + \\kappa_2r^4) \\\\ {y'}_d &= {y'}_n(1 + \\kappa_1r^2 + \\kappa_2r^4) \\\\ \\end{align} \\] Solution Take a photo of a grid at the same point and then use the mathmatics to calculate and correct radial distortion.","title":"Distortion"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#orthographic-projection","text":"\\[ \\begin{bmatrix} 1 & 0 & 0 & 0 \\\\ 0 & 1 & 0 & 0 \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ z \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} x \\\\ y \\\\ 1 \\\\ \\end{bmatrix} \\Rightarrow (x, y) \\]","title":"Orthographic Projection"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#photometric-image-formation","text":"","title":"Photometric Image Formation\uff08\u5b9a\u989c\u8272/\u4eae\u5ea6\uff09"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#image-sensor","text":"CMOS CCD (Charge Coupled Device)","title":"Image Sensor"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#shutter","text":"Shutter speed controls exposure time.","title":"Shutter"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#color-sensing","text":"Color Spaces RGB HSV Practical Color Sensing: Bayer Filter","title":"Color Sensing"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#shading","text":"","title":"Shading \u7740\u8272"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#brdf-bidirectional-reflectance-distribution-function","text":"\\[ L_r(\\hat{\\textbf{v}_r};\\lambda) = \\int L_i(\\hat{\\textbf{i}_r};\\lambda)f_r(\\hat{\\textbf{v}_r}, \\hat{\\textbf{v}_i}, \\hat{\\textbf{n}}; \\lambda)\\cos^+\\theta_i\\ d\\hat{\\textbf{v}_i} \\]","title":"BRDF (Bidirectional Reflectance Distribution Function)"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#diffuse-lambertian-reflection","text":"Shading independent of view direction","title":"Diffuse (Lambertian) Reflection"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#specular-term","text":"Intensity depends on view direction","title":"Specular Term"},{"location":"Computer_Science_Courses/ICV/2_Image_Formation/#blinn-phong-reflection-model","text":"\\[ L = L_a + L_d + L_s = k_aI_a + k_d(I/r^2)\\max(0, \\textbf{n}\\cdot\\textbf{l}) + k_s(I/r^2)\\max(0, \\textbf{n}\\cdot\\textbf{h})^p \\]","title":"Blinn-Phong Reflection Model"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/","text":"Lecture 3 Imae Processing \u00b6 Image Processing Basis \u00b6 Operations: Incresing contrast, Invert, Blur, Sharpen, Edge Detection Convolution \u00b6 \\[ (f * g)(x) = \\int_{-\\infty}^\\infty f(y)g(x-y)dy \\] discrete 2D form \\[ (f * g)(x) = \\sum_{i, j =-\\infty}^\\infty f(i, j)g(x - i, y - j) \\] Gaussian Blur \u00b6 2D Gaussian function \\[ \\large f(i, j) = \\frac{1}{2\\pi\\sigma^2}e^{-\\frac{i^2 + j^2}{2\\sigma^2}} \\] Usage Define a window size (commmly a square, say \\(n \\times n\\) , and let \\(r = \\lfloor n / 2 \\rfloor\\) ). Select a point, say \\((x, y)\\) and then a window around it. Apply the Gaussian function at each point in the window, and sum them up, namely \\(G(x, y) = \\sum\\limits_{i = x - r}^{x + r}\\sum\\limits_{j = y - r}^{y + r}f(i,j)\\) . Then the \"blurred\" value of point \\((x, y)\\) is \\(G(x, y)\\) . Sharpen \u00b6 An example of kernel matrix \\[ f = \\begin{bmatrix} 0 & -1 & 0 \\\\ -1 & 5 & -1 \\\\ 0 & -1 & 0 \\end{bmatrix} \\] An insight Let \\(I\\) be the original image, then the sharpen image \\(I' = I + (I - \\text{blur}(I))\\) , where \\(I - \\text{blur}(I)\\) can be regarded as the high frequency content. Extract Gradients \u00b6 Examples of kernel matrix \\(f = \\begin{bmatrix} -1 & 0 & 1 \\\\ -2 & 0 & 2 \\\\ -1 & 0 & 1\\end{bmatrix}\\) extracts horizontal gradients. \\(f = \\begin{bmatrix} -1 & -2 & -1 \\\\ 0 & 0 & 0 \\\\ 1 & 2 & 1 \\end{bmatrix}\\) extracts vertical gradients. Bilateral Filters \u00b6 Kernel depends on image content. Better performance but lower efficiency. A trick: Separable Filter A filter is separable if it can be wriiten as the outer product of two other filters. Example \\[ \\frac19 \\begin{bmatrix} 1 & 1 & 1\\\\ 1 & 1 & 1\\\\ 1 & 1 & 1 \\end{bmatrix} = \\frac13 \\begin{bmatrix} 1 \\\\ 1 \\\\ 1 \\end{bmatrix} \\times \\frac13 \\begin{bmatrix} 1 & 1 & 1 \\end{bmatrix} \\] Purpose / Advantages : speed up the calculation Image Sampling \u00b6 Abstract Down-sampling \u2192 Reducing image size Aliasing \u00b6 Aliasing is the artifacts due to sampling Higher frequencies need faster sampling. Undersampling creates frequency aliases. Fourier Transform \u00b6 Simly put, fourier transform represents a function as a weighted sum of sines and cosines , where the sines and consines are in various frequencies . Convolution Theorem From the view of Fourier Transform ... \u00b6 Sampling and Aliasing \u00b6 Sampling is repeating frequency contents. Aliasing is mixed frequency contents. Method to reduce aliasing Increase sampling rate Nyquist-Shannon theorem the signal can be perfectly reconstructed if sampled with a frequency larger than \\(2f_0\\) . Anti-aliasing Filtering, then sampling Example Image Magnification \u00b6 Abstract Up-sampling - Inverse of down-sampling An important method: Interpolation . 1D Interpolation \u00b6 Nearest-neighbour Interpolation Not continuous; Not smooth Linear Interpolation Continuous; Not smooth Cubic Interpolation Continuous; Smooth 2D Interpolation \u00b6 (similar to 1D cases) Nearest-neighbour Interpolation Bilinear Interpolation define \\(\\text{lerp}(x, v_0,v_1) = v_0 + x(v_1 - v_0)\\) . Suppose the point in the rectangle surrounded by four points \\(u_{00},u_{01},u_{10},u_{11}\\) . then \\(f(x, y) = \\text{lerp}(t, u_0, u_1)\\) , where \\(u_0 = \\text{lerp}(s, u_{00}, u_{10})\\) and \\(u_1 = \\text{lerp}(s, u_{01}, u_{11})\\) . Bicubic Interpolation Super-Resolution \u00b6 Remains Change Aspect Ratio \u00b6 Remains","title":"Lecture 3"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#lecture-3-imae-processing","text":"","title":"Lecture 3 Imae Processing"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#image-processing-basis","text":"Operations: Incresing contrast, Invert, Blur, Sharpen, Edge Detection","title":"Image Processing Basis"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#convolution","text":"\\[ (f * g)(x) = \\int_{-\\infty}^\\infty f(y)g(x-y)dy \\] discrete 2D form \\[ (f * g)(x) = \\sum_{i, j =-\\infty}^\\infty f(i, j)g(x - i, y - j) \\]","title":"Convolution"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#gaussian-blur","text":"2D Gaussian function \\[ \\large f(i, j) = \\frac{1}{2\\pi\\sigma^2}e^{-\\frac{i^2 + j^2}{2\\sigma^2}} \\] Usage Define a window size (commmly a square, say \\(n \\times n\\) , and let \\(r = \\lfloor n / 2 \\rfloor\\) ). Select a point, say \\((x, y)\\) and then a window around it. Apply the Gaussian function at each point in the window, and sum them up, namely \\(G(x, y) = \\sum\\limits_{i = x - r}^{x + r}\\sum\\limits_{j = y - r}^{y + r}f(i,j)\\) . Then the \"blurred\" value of point \\((x, y)\\) is \\(G(x, y)\\) .","title":"Gaussian Blur"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#sharpen","text":"An example of kernel matrix \\[ f = \\begin{bmatrix} 0 & -1 & 0 \\\\ -1 & 5 & -1 \\\\ 0 & -1 & 0 \\end{bmatrix} \\] An insight Let \\(I\\) be the original image, then the sharpen image \\(I' = I + (I - \\text{blur}(I))\\) , where \\(I - \\text{blur}(I)\\) can be regarded as the high frequency content.","title":"Sharpen"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#extract-gradients","text":"Examples of kernel matrix \\(f = \\begin{bmatrix} -1 & 0 & 1 \\\\ -2 & 0 & 2 \\\\ -1 & 0 & 1\\end{bmatrix}\\) extracts horizontal gradients. \\(f = \\begin{bmatrix} -1 & -2 & -1 \\\\ 0 & 0 & 0 \\\\ 1 & 2 & 1 \\end{bmatrix}\\) extracts vertical gradients.","title":"Extract Gradients"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#bilateral-filters","text":"Kernel depends on image content. Better performance but lower efficiency. A trick: Separable Filter A filter is separable if it can be wriiten as the outer product of two other filters. Example \\[ \\frac19 \\begin{bmatrix} 1 & 1 & 1\\\\ 1 & 1 & 1\\\\ 1 & 1 & 1 \\end{bmatrix} = \\frac13 \\begin{bmatrix} 1 \\\\ 1 \\\\ 1 \\end{bmatrix} \\times \\frac13 \\begin{bmatrix} 1 & 1 & 1 \\end{bmatrix} \\] Purpose / Advantages : speed up the calculation","title":"Bilateral Filters"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#image-sampling","text":"Abstract Down-sampling \u2192 Reducing image size","title":"Image Sampling"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#aliasing","text":"Aliasing is the artifacts due to sampling Higher frequencies need faster sampling. Undersampling creates frequency aliases.","title":"Aliasing"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#fourier-transform","text":"Simly put, fourier transform represents a function as a weighted sum of sines and cosines , where the sines and consines are in various frequencies . Convolution Theorem","title":"Fourier Transform"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#from-the-view-of-fourier-transform","text":"","title":"From the view of Fourier Transform ..."},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#sampling-and-aliasing","text":"Sampling is repeating frequency contents. Aliasing is mixed frequency contents. Method to reduce aliasing Increase sampling rate Nyquist-Shannon theorem the signal can be perfectly reconstructed if sampled with a frequency larger than \\(2f_0\\) . Anti-aliasing Filtering, then sampling Example","title":"Sampling and Aliasing"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#image-magnification","text":"Abstract Up-sampling - Inverse of down-sampling An important method: Interpolation .","title":"Image Magnification"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#1d-interpolation","text":"Nearest-neighbour Interpolation Not continuous; Not smooth Linear Interpolation Continuous; Not smooth Cubic Interpolation Continuous; Smooth","title":"1D Interpolation"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#2d-interpolation","text":"(similar to 1D cases) Nearest-neighbour Interpolation Bilinear Interpolation define \\(\\text{lerp}(x, v_0,v_1) = v_0 + x(v_1 - v_0)\\) . Suppose the point in the rectangle surrounded by four points \\(u_{00},u_{01},u_{10},u_{11}\\) . then \\(f(x, y) = \\text{lerp}(t, u_0, u_1)\\) , where \\(u_0 = \\text{lerp}(s, u_{00}, u_{10})\\) and \\(u_1 = \\text{lerp}(s, u_{01}, u_{11})\\) . Bicubic Interpolation","title":"2D Interpolation"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#super-resolution","text":"Remains","title":"Super-Resolution"},{"location":"Computer_Science_Courses/ICV/3_Image_Processing/#change-aspect-ratio","text":"Remains","title":"Change Aspect Ratio"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/","text":"Lecture 4 Model Fitting and Optimization \u00b6 Optimization \u00b6 \\[ \\begin{align} & \\text{Minimize } & f_0(x) \\\\ & \\text{Subject to } &f_i(x) & \\le 0,\\ i = 1, \\dots, m \\\\ & & g_i(x) & = 0,\\ i = 1,\\dots, p \\end{align} \\] \\(x \\in \\mathbb{R}^n\\) is a vector variable to be chosen. \\(f_0\\) is the objective function to be minimized. \\(f_1, \\dots, f_m\\) are the inequality constraint functions. \\(g_1, \\dots, g_p\\) are the equality constraint functions. Model Fitting \u00b6 A typical approach: Minimize the Mean Square Error ( MSE ) \\[ \\hat x = \\mathop{\\arg\\min}\\limits_x \\sum\\limits_i(b_i - a_i^Tx)^2 \\] Reasons to choose MSE \u00b6 Key Assumptions: MSE = MLE with Gaussian noise From Maximum Likelihood Estimation ( MLE ) , the data is assumed to be with Gaussian noise . \\[ b_i = a_i^Tx + n,\\ n \\sim G(0, \\sigma) \\] The likelihood of observing \\((a_i, b_i)\\) is \\[ P[(a_i, b_i)|x] = P[b_i - a_i^Tx] \\propto \\exp\\left(-\\frac{(b_i - a_i^Tx)^2}{2\\sigma^2}\\right) \\] Note If the data points are independent , \\[ \\begin{align} P[(a_1, b_1)(a_2, b_2)\\dots|x] & = \\prod\\limits_iP[(a_i, b_i)|x] = \\prod\\limits_iP[b_i - a_{i^{Tx]}} \\\\ & \\propto \\exp\\left(-\\frac{\\sum_i(b_i - a_i^Tx)^2}{2\\sigma^2}\\right) = \\exp\\left(-\\frac{||Ax-b||^2_2}{2\\sigma^2}\\right) \\end{align} \\] \\[ \\begin{align} \\hat x &= \\mathop{\\arg\\max}\\limits_x P[(a_1, b_1)(a_2, b_2)\\dots|x] \\\\ &= \\mathop{\\arg\\max}\\limits_x \\exp\\left(-\\frac{||Ax-b||^2_2}{2\\sigma^2}\\right) = \\mathop{\\arg\\min}\\limits_x||Ax - b||_2^2 \\end{align} \\] Numerical Methods \u00b6 Analytical Solution \u89e3\u6790\u89e3 \u00b6 The derivative of \\(||Ax-b||^2_2\\) is \\(2A^T(Ax - b)\\) , let it be 0. Then we get \\(\\hat x\\) satisfying \\[ A^TAx = A^Tb \\] But, if no analytical solution ... Approximate Solution \u8fd1\u4f3c\u89e3 \u00b6 Method \\(x \\leftarrow x_0\\) \\(\\text{while not converge}\\) \\(p \\leftarrow \\text{descending_direction(x)}\\) \\(\\alpha \\leftarrow \\text{descending_step(x)}\\) \\(x \\leftarrow x + \\alpha p\\) Gradient Descent (GD) \u00b6 Steepest Descent Method \u00b6 \\[ F(x_0 + \\Delta x) \\approx F(x_0) + J_F\\Delta x \\] Direction \\(\\Delta x = -J^T_F\\) Step To minimize \\(\\phi(a)\\) Backtracking Algorithm Initialize \\(\\alpha\\) with a large value. Decrease \\(\\alpha\\) until \\(\\phi(\\alpha)\\le\\phi(0) + \\gamma\\phi'(0)\\alpha\\) . Advantage Easy to implement Perform well when far from the minimum Disadvantage Converge slowly when near the minimum, which wastes a lot of computation Newton Method \u00b6 \\[ F(x_0 + \\Delta x) \\approx F(x_0) + J_F\\Delta x + \\frac12\\Delta x^TH_F\\Delta x \\] \\(\\Delta x = -H_F^{-1}J^T_F\\) Advantage Faster convergence Disadvantage Hessian matrix requires a lot of computation Gauss-Newton Method \u00b6 For \\(\\hat x = \\mathop{\\arg\\min}\\limits_x ||Ax-b||^2_2 \\overset{\\Delta}{=\\!=}\\mathop{\\arg\\min}\\limits_x||R(x)||^2_2\\) , expand \\(R(x)\\) . \\[ \\begin{align} ||R(x_k+\\Delta x)||^2_2 &\\approx ||R(x_k) + J_R\\Delta x||^2_2 \\newline &= ||R(x_k)||^2_2 + 2R(x_k)^TJ_R\\Delta x + \\Delta x^TJ^T_RJ_R\\Delta x \\end{align} \\] \\(\\Delta x = -(J_R^TJ_R)^{-1}J_R^TR(x_k) = -(J_R^TJ_R)^{-1}J_F^T\\) Compared to Newton Method, \\(J_R^TJ_R\\) is used to approximate \\(H_F\\) . Advantage No need to compute Hessian matrix Faster to converge Disadvantage \\(J^T_RJ_R\\) may be singular. Levenberg-Marquardt (LM) \u00b6 \\(\\Delta x = -(J_R^TJ_R + \\lambda I)^{-1}J_R^TR(x_k)\\) \\(\\lambda \\rightarrow \\infty\\) Steepest Descent \\(\\lambda \\rightarrow 0\\) Gauss-Newton Advantage Start and converge quickly Local Minimum and Global Minimum Convex Optimization \u00b6 Remains Robust Estimation \u00b6 Inlier obeys the model assumption. Outlier differs significantly rom the assumption. Outlier makes MSE fail. To reduce its effect, we can use other loss functions, called robust functions. RANSAC (Random Sample Concensus) \u00b6 The most powerful method to handle outliers. Key ideas The distribution of inliers is similar while outliers differ a lot. Use data point pairs to vote ill-posed Problem \u75c5\u6001\u95ee\u9898 / \u591a\u89e3\u95ee\u9898 \u00b6 The solution is not unique. To make it unique: L2 regularization Suppress redundant variables \\(\\min_x||Ax-b||^2_2,\\ s.t. ||x||_2 \\le 1\\) (the same as \\(\\min_x||Ax-b||^2_2 + \\lambda||x||_2\\) ) L1 regularization Make \\(x\\) sparse \\(\\min_x||Ax-b||^2_2,\\ s.t. ||x||_1 \\le 1\\) (the same as \\(\\min_x||Ax-b||^2_2 + \\lambda||x||_1\\) ) Graphcut and MRF \u00b6 Note A key idea: Neighboring pixels tend to take the same label. Images as Graphs A vertex for each pixel An edge between each pair, weighted by the affinity or similarity between its two vertices Pixel Dissimilarity \\(S(\\textbf{f}_i, \\textbf{f}_j) = \\sqrt{\\sum_k(f_{ik} - f_{jk})^2}\\) Pixel Affinity \\(w(i, j) = A(\\textbf{f}_i, \\textbf{f}_j) = \\exp\\left(\\frac{-1}{2\\sigma^2}S(\\textbf{f}_i, \\textbf{f}_j)\\right)\\) Graph Notation \\(G = (V, E)\\) \\(V\\) : a set of vertices \\(E\\) : a set of edges Graph Cut \u00b6 Cut \\(C=(V_A, V_B)\\) is a parition of vertices \\(V\\) of a graph \\(G\\) into two disjoint subsets \\(V_A\\) and \\(V_B\\) . Cost of Cut \\(\\text{cut}(V_A, V_B) = \\sum_{u\\in V_A, v\\in V_B} w(u, v)\\) Problem with min-cut \u00b6 Bias to cut small, isolated segments Solution: Normalized cut Compute how strongly verices \\(V_A\\) are associated with vertices \\(V\\) \\[ \\text{assoc}(V_A, V) = \\sum_{u\\in V_A, v\\in V} w(u, v) \\] \\[ \\text{NCut}(V_A, V_B) = \\frac{\\text{cut}(V_A, V_B)}{\\text{assoc}(V_A, V)} + \\frac{\\text{cut}(V_A, V_B)}{\\text{assoc}(V_B, V)} \\] Markow Random Field ( MRF ) \u00b6 Graphcut is an exception of MRF . Question","title":"Lecture 4"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#lecture-4-model-fitting-and-optimization","text":"","title":"Lecture 4 Model Fitting and Optimization"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#optimization","text":"\\[ \\begin{align} & \\text{Minimize } & f_0(x) \\\\ & \\text{Subject to } &f_i(x) & \\le 0,\\ i = 1, \\dots, m \\\\ & & g_i(x) & = 0,\\ i = 1,\\dots, p \\end{align} \\] \\(x \\in \\mathbb{R}^n\\) is a vector variable to be chosen. \\(f_0\\) is the objective function to be minimized. \\(f_1, \\dots, f_m\\) are the inequality constraint functions. \\(g_1, \\dots, g_p\\) are the equality constraint functions.","title":"Optimization"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#model-fitting","text":"A typical approach: Minimize the Mean Square Error ( MSE ) \\[ \\hat x = \\mathop{\\arg\\min}\\limits_x \\sum\\limits_i(b_i - a_i^Tx)^2 \\]","title":"Model Fitting"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#reasons-to-choose-mse","text":"Key Assumptions: MSE = MLE with Gaussian noise From Maximum Likelihood Estimation ( MLE ) , the data is assumed to be with Gaussian noise . \\[ b_i = a_i^Tx + n,\\ n \\sim G(0, \\sigma) \\] The likelihood of observing \\((a_i, b_i)\\) is \\[ P[(a_i, b_i)|x] = P[b_i - a_i^Tx] \\propto \\exp\\left(-\\frac{(b_i - a_i^Tx)^2}{2\\sigma^2}\\right) \\] Note If the data points are independent , \\[ \\begin{align} P[(a_1, b_1)(a_2, b_2)\\dots|x] & = \\prod\\limits_iP[(a_i, b_i)|x] = \\prod\\limits_iP[b_i - a_{i^{Tx]}} \\\\ & \\propto \\exp\\left(-\\frac{\\sum_i(b_i - a_i^Tx)^2}{2\\sigma^2}\\right) = \\exp\\left(-\\frac{||Ax-b||^2_2}{2\\sigma^2}\\right) \\end{align} \\] \\[ \\begin{align} \\hat x &= \\mathop{\\arg\\max}\\limits_x P[(a_1, b_1)(a_2, b_2)\\dots|x] \\\\ &= \\mathop{\\arg\\max}\\limits_x \\exp\\left(-\\frac{||Ax-b||^2_2}{2\\sigma^2}\\right) = \\mathop{\\arg\\min}\\limits_x||Ax - b||_2^2 \\end{align} \\]","title":"Reasons to choose MSE"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#numerical-methods","text":"","title":"Numerical Methods"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#analytical-solution","text":"The derivative of \\(||Ax-b||^2_2\\) is \\(2A^T(Ax - b)\\) , let it be 0. Then we get \\(\\hat x\\) satisfying \\[ A^TAx = A^Tb \\] But, if no analytical solution ...","title":"Analytical Solution \u89e3\u6790\u89e3"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#approximate-solution","text":"Method \\(x \\leftarrow x_0\\) \\(\\text{while not converge}\\) \\(p \\leftarrow \\text{descending_direction(x)}\\) \\(\\alpha \\leftarrow \\text{descending_step(x)}\\) \\(x \\leftarrow x + \\alpha p\\)","title":"Approximate Solution \u8fd1\u4f3c\u89e3"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#gradient-descent-gd","text":"","title":"Gradient Descent (GD)"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#steepest-descent-method","text":"\\[ F(x_0 + \\Delta x) \\approx F(x_0) + J_F\\Delta x \\] Direction \\(\\Delta x = -J^T_F\\) Step To minimize \\(\\phi(a)\\) Backtracking Algorithm Initialize \\(\\alpha\\) with a large value. Decrease \\(\\alpha\\) until \\(\\phi(\\alpha)\\le\\phi(0) + \\gamma\\phi'(0)\\alpha\\) . Advantage Easy to implement Perform well when far from the minimum Disadvantage Converge slowly when near the minimum, which wastes a lot of computation","title":"Steepest Descent Method"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#newton-method","text":"\\[ F(x_0 + \\Delta x) \\approx F(x_0) + J_F\\Delta x + \\frac12\\Delta x^TH_F\\Delta x \\] \\(\\Delta x = -H_F^{-1}J^T_F\\) Advantage Faster convergence Disadvantage Hessian matrix requires a lot of computation","title":"Newton Method"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#gauss-newton-method","text":"For \\(\\hat x = \\mathop{\\arg\\min}\\limits_x ||Ax-b||^2_2 \\overset{\\Delta}{=\\!=}\\mathop{\\arg\\min}\\limits_x||R(x)||^2_2\\) , expand \\(R(x)\\) . \\[ \\begin{align} ||R(x_k+\\Delta x)||^2_2 &\\approx ||R(x_k) + J_R\\Delta x||^2_2 \\newline &= ||R(x_k)||^2_2 + 2R(x_k)^TJ_R\\Delta x + \\Delta x^TJ^T_RJ_R\\Delta x \\end{align} \\] \\(\\Delta x = -(J_R^TJ_R)^{-1}J_R^TR(x_k) = -(J_R^TJ_R)^{-1}J_F^T\\) Compared to Newton Method, \\(J_R^TJ_R\\) is used to approximate \\(H_F\\) . Advantage No need to compute Hessian matrix Faster to converge Disadvantage \\(J^T_RJ_R\\) may be singular.","title":"Gauss-Newton Method"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#levenberg-marquardt-lm","text":"\\(\\Delta x = -(J_R^TJ_R + \\lambda I)^{-1}J_R^TR(x_k)\\) \\(\\lambda \\rightarrow \\infty\\) Steepest Descent \\(\\lambda \\rightarrow 0\\) Gauss-Newton Advantage Start and converge quickly Local Minimum and Global Minimum","title":"Levenberg-Marquardt (LM)"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#convex-optimization","text":"Remains","title":"Convex Optimization"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#robust-estimation","text":"Inlier obeys the model assumption. Outlier differs significantly rom the assumption. Outlier makes MSE fail. To reduce its effect, we can use other loss functions, called robust functions.","title":"Robust Estimation"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#ransac-random-sample-concensus","text":"The most powerful method to handle outliers. Key ideas The distribution of inliers is similar while outliers differ a lot. Use data point pairs to vote","title":"RANSAC (Random Sample Concensus)"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#ill-posed-problem","text":"The solution is not unique. To make it unique: L2 regularization Suppress redundant variables \\(\\min_x||Ax-b||^2_2,\\ s.t. ||x||_2 \\le 1\\) (the same as \\(\\min_x||Ax-b||^2_2 + \\lambda||x||_2\\) ) L1 regularization Make \\(x\\) sparse \\(\\min_x||Ax-b||^2_2,\\ s.t. ||x||_1 \\le 1\\) (the same as \\(\\min_x||Ax-b||^2_2 + \\lambda||x||_1\\) )","title":"ill-posed Problem \u75c5\u6001\u95ee\u9898 / \u591a\u89e3\u95ee\u9898"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#graphcut-and-mrf","text":"Note A key idea: Neighboring pixels tend to take the same label. Images as Graphs A vertex for each pixel An edge between each pair, weighted by the affinity or similarity between its two vertices Pixel Dissimilarity \\(S(\\textbf{f}_i, \\textbf{f}_j) = \\sqrt{\\sum_k(f_{ik} - f_{jk})^2}\\) Pixel Affinity \\(w(i, j) = A(\\textbf{f}_i, \\textbf{f}_j) = \\exp\\left(\\frac{-1}{2\\sigma^2}S(\\textbf{f}_i, \\textbf{f}_j)\\right)\\) Graph Notation \\(G = (V, E)\\) \\(V\\) : a set of vertices \\(E\\) : a set of edges","title":"Graphcut and MRF"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#graph-cut","text":"Cut \\(C=(V_A, V_B)\\) is a parition of vertices \\(V\\) of a graph \\(G\\) into two disjoint subsets \\(V_A\\) and \\(V_B\\) . Cost of Cut \\(\\text{cut}(V_A, V_B) = \\sum_{u\\in V_A, v\\in V_B} w(u, v)\\)","title":"Graph Cut"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#problem-with-min-cut","text":"Bias to cut small, isolated segments Solution: Normalized cut Compute how strongly verices \\(V_A\\) are associated with vertices \\(V\\) \\[ \\text{assoc}(V_A, V) = \\sum_{u\\in V_A, v\\in V} w(u, v) \\] \\[ \\text{NCut}(V_A, V_B) = \\frac{\\text{cut}(V_A, V_B)}{\\text{assoc}(V_A, V)} + \\frac{\\text{cut}(V_A, V_B)}{\\text{assoc}(V_B, V)} \\]","title":"Problem with min-cut"},{"location":"Computer_Science_Courses/ICV/4_Model_Fitting_and_Optimization/#markow-random-field-mrf","text":"Graphcut is an exception of MRF . Question","title":"Markow Random Field (MRF)"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/","text":"Lecture 5 Image Matching and Motion Estimation \u00b6 Image Matching \u00b6 Abstract Dectection Description Matching Learned based matching 1. Detection \u00b6 We want uniqueness. Corner Detection \u00b6 Local measures of uniqueness \u00b6 shifting the window in any direction causes a big change distribution of gradients Principal Component Analysis (PCA) \u4e3b\u6210\u5206\u5206\u6790 To describe the distribution of gradients by two eigenvectors. Method Compute the covariance matrix \\(H\\) at each point and compute its eigenvalues \\(\\lambda_1\\) , \\(\\lambda_2\\) . Classify Flat - \\(\\lambda_1\\) and \\(lambda_2\\) are both small. Edge - \\(\\lambda_1 \\gg \\lambda_2\\) or \\(\\lambda_1 \\ll \\lambda_2\\) . Corner - \\(\\lambda_1\\) and $lambda_2are both large. Harri Corner Detector However, computing eigenvalues are expensive. Instead, we use Harris corner detector to indicate it. Compute derivatives at each pixel. Compute covariance matrix \\(H\\) in a Gaussian window around each pixel. Compute corner response function \\(f\\) , given by \\[ f = \\frac{\\lambda_1\\lambda_2}{\\lambda_1 + \\lambda_2} = \\frac{\\det(H)}{\\text{tr}(H)} \\] Threshold \\(f\\) . Find local maxima of response function. Invariance Properties Invariant to intensity shift, translation, rotation Not invariant to intensity scaling, scaling How to find the correct scale? Try each scale and find the scale of maximum of \\(f\\) . Implementation \u2014\u2014 image pyramid with a fixed window size. Blob Detection \u00b6 convolution! Laplacian of Gaussian (LoG) Filter \u00b6 Example \\[ f = \\begin{bmatrix} 0 & 1 & 0 \\\\ 1 & -4 & 1 \\\\ 0 & 1 & 0 \\end{bmatrix} \\] Laplacian is sensitive to noise. To solve this flaw, we often Smooth image with a Gaussian filter Compute Laplacian \\[ \\nabla^2(f*g) = f*\\nabla^2g, \\text{ where $f$ is the Laplacian and $g$ is the Gaussian} \\] Scale Selection (the same problem as corner detection) \u00b6 The same solution as corner detection - Try and find maximum. Implementation: Difference of Gaussian (DoG) \u00b6 A way to acclerate computation, since LoG can be approximated by DoG. \\[ \\nabla^2G_\\sigma \\approx G_{\\sigma_1} - G_{\\sigma_2} \\] 2. Description \u00b6 We mainly focus on the SIFT (Scale Invariant Feature Transform) descriptor. Orientation Normalization \u00b6 Compute orientation histogram Select dominant orientation Normalize: rotate to fixed orientation Properites of SIFT \u00b6 Extraordinaraily robust matching technique handle changes in viewpoint Theoretically invariant to scale and rotation handle significant changes in illumination Fast Other dectectores and descriptors HOG SURF FAST ORB Fast Retina Key-point 3. Matching \u00b6 Feature matching \u00b6 Define distance function to compare two descriptors. Test all to find the minimum distance. Problem: repeated elements To find that the problem happens: Ratio Test Ratio score = \\(\\frac{||f_1 - f_2||}{||f_1 - f_2'||}\\) best match \\(f_2\\) , second best match \\(f'_2\\) . Another strategy: Mutual Nearest Neighbor \\(f_2\\) is the nearest neighbour of \\(f_1\\) in \\(I_2\\) . \\(f_1\\) is the nearest neighbour of \\(f_2\\) in \\(I_1\\) . 4. Learning based matching \u00b6 Question Motion Estimation \u00b6 Problems Feature-tracking Optical flow Method: Lucas-Kanade Method \u00b6 Assumptions \u00b6 Small motion Brightness constancy Spatial coherence Brightness constancy \u00b6 \\[ \\begin{align} I(x, y, t) &= I(x + u, y + v, t + 1) \\\\ I(x + u, y + v, t + 1) &\\approx I(x, y, t) + I_x u + I_y v + I_t \\\\ I_x u + I_y v + I_t &\\approx 0 \\\\ \\nabla I \\cdot [u, v]^T + I_t &= 0 \\end{align} \\] Aperture Problem \u00b6 Idea: To get more equations \u2192 Spatial coherence constraint Assume the pixel's neighbors have the same motion \\([u, v]\\) . If we use an \\(n\\times n\\) window, \\[ \\begin{bmatrix} I_x(\\textbf{p}_\\textbf{1}) & I_y(\\textbf{p}_\\textbf{1}) \\\\ \\vdots & \\vdots\\\\ I_x(\\textbf{p}_\\textbf{1}) & I_y(\\textbf{p}_{\\textbf{n}^\\textbf{2}}) \\\\ \\end{bmatrix} \\begin{bmatrix} u \\\\ v \\end{bmatrix} = - \\begin{bmatrix} I_t(\\textbf{p}_\\textbf{1}) \\\\ \\vdots \\\\ I_t(\\textbf{p}_{\\textbf{n}^\\textbf{2}}) \\end{bmatrix} \\Rightarrow Ad=b \\] More equations than variables. Thus we solve \\(\\min_d||Ad-b||^2\\) . Solution is given by \\((A^TA)d = A^Tb\\) , when solvable, which is \\(A^TA\\) should be invertible and well-conditioned (eigenvalues should not be too small, similarly with criteria for Harris corner detector). Thus it's easier to estimate the motion of a corner, then edge, then low texture region (flat). Small Motion Assumption \u00b6 For taylor expansion, we want the motion as small as possbile. But probably not - at least larger than one pixel. Solution \u00b6 Reduce the resolution Use the image pyramid","title":"Lecture 5"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#lecture-5-image-matching-and-motion-estimation","text":"","title":"Lecture 5 Image Matching and Motion Estimation"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#image-matching","text":"Abstract Dectection Description Matching Learned based matching","title":"Image Matching"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#1-detection","text":"We want uniqueness.","title":"1. Detection"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#corner-detection","text":"","title":"Corner Detection"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#local-measures-of-uniqueness","text":"shifting the window in any direction causes a big change distribution of gradients Principal Component Analysis (PCA) \u4e3b\u6210\u5206\u5206\u6790 To describe the distribution of gradients by two eigenvectors. Method Compute the covariance matrix \\(H\\) at each point and compute its eigenvalues \\(\\lambda_1\\) , \\(\\lambda_2\\) . Classify Flat - \\(\\lambda_1\\) and \\(lambda_2\\) are both small. Edge - \\(\\lambda_1 \\gg \\lambda_2\\) or \\(\\lambda_1 \\ll \\lambda_2\\) . Corner - \\(\\lambda_1\\) and $lambda_2are both large. Harri Corner Detector However, computing eigenvalues are expensive. Instead, we use Harris corner detector to indicate it. Compute derivatives at each pixel. Compute covariance matrix \\(H\\) in a Gaussian window around each pixel. Compute corner response function \\(f\\) , given by \\[ f = \\frac{\\lambda_1\\lambda_2}{\\lambda_1 + \\lambda_2} = \\frac{\\det(H)}{\\text{tr}(H)} \\] Threshold \\(f\\) . Find local maxima of response function. Invariance Properties Invariant to intensity shift, translation, rotation Not invariant to intensity scaling, scaling How to find the correct scale? Try each scale and find the scale of maximum of \\(f\\) . Implementation \u2014\u2014 image pyramid with a fixed window size.","title":"Local measures of uniqueness"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#blob-detection","text":"convolution!","title":"Blob Detection"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#laplacian-of-gaussian-log-filter","text":"Example \\[ f = \\begin{bmatrix} 0 & 1 & 0 \\\\ 1 & -4 & 1 \\\\ 0 & 1 & 0 \\end{bmatrix} \\] Laplacian is sensitive to noise. To solve this flaw, we often Smooth image with a Gaussian filter Compute Laplacian \\[ \\nabla^2(f*g) = f*\\nabla^2g, \\text{ where $f$ is the Laplacian and $g$ is the Gaussian} \\]","title":"Laplacian of Gaussian (LoG) Filter"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#scale-selection-the-same-problem-as-corner-detection","text":"The same solution as corner detection - Try and find maximum.","title":"Scale Selection (the same problem as corner detection)"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#implementation-difference-of-gaussian-dog","text":"A way to acclerate computation, since LoG can be approximated by DoG. \\[ \\nabla^2G_\\sigma \\approx G_{\\sigma_1} - G_{\\sigma_2} \\]","title":"Implementation: Difference of Gaussian (DoG)"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#2-description","text":"We mainly focus on the SIFT (Scale Invariant Feature Transform) descriptor.","title":"2. Description"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#orientation-normalization","text":"Compute orientation histogram Select dominant orientation Normalize: rotate to fixed orientation","title":"Orientation Normalization"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#properites-of-sift","text":"Extraordinaraily robust matching technique handle changes in viewpoint Theoretically invariant to scale and rotation handle significant changes in illumination Fast Other dectectores and descriptors HOG SURF FAST ORB Fast Retina Key-point","title":"Properites of SIFT"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#3-matching","text":"","title":"3. Matching"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#feature-matching","text":"Define distance function to compare two descriptors. Test all to find the minimum distance. Problem: repeated elements To find that the problem happens: Ratio Test Ratio score = \\(\\frac{||f_1 - f_2||}{||f_1 - f_2'||}\\) best match \\(f_2\\) , second best match \\(f'_2\\) . Another strategy: Mutual Nearest Neighbor \\(f_2\\) is the nearest neighbour of \\(f_1\\) in \\(I_2\\) . \\(f_1\\) is the nearest neighbour of \\(f_2\\) in \\(I_1\\) .","title":"Feature matching"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#4-learning-based-matching","text":"Question","title":"4. Learning based matching"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#motion-estimation","text":"Problems Feature-tracking Optical flow","title":"Motion Estimation"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#method-lucas-kanade-method","text":"","title":"Method: Lucas-Kanade Method"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#assumptions","text":"Small motion Brightness constancy Spatial coherence","title":"Assumptions"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#brightness-constancy","text":"\\[ \\begin{align} I(x, y, t) &= I(x + u, y + v, t + 1) \\\\ I(x + u, y + v, t + 1) &\\approx I(x, y, t) + I_x u + I_y v + I_t \\\\ I_x u + I_y v + I_t &\\approx 0 \\\\ \\nabla I \\cdot [u, v]^T + I_t &= 0 \\end{align} \\]","title":"Brightness constancy"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#aperture-problem","text":"Idea: To get more equations \u2192 Spatial coherence constraint Assume the pixel's neighbors have the same motion \\([u, v]\\) . If we use an \\(n\\times n\\) window, \\[ \\begin{bmatrix} I_x(\\textbf{p}_\\textbf{1}) & I_y(\\textbf{p}_\\textbf{1}) \\\\ \\vdots & \\vdots\\\\ I_x(\\textbf{p}_\\textbf{1}) & I_y(\\textbf{p}_{\\textbf{n}^\\textbf{2}}) \\\\ \\end{bmatrix} \\begin{bmatrix} u \\\\ v \\end{bmatrix} = - \\begin{bmatrix} I_t(\\textbf{p}_\\textbf{1}) \\\\ \\vdots \\\\ I_t(\\textbf{p}_{\\textbf{n}^\\textbf{2}}) \\end{bmatrix} \\Rightarrow Ad=b \\] More equations than variables. Thus we solve \\(\\min_d||Ad-b||^2\\) . Solution is given by \\((A^TA)d = A^Tb\\) , when solvable, which is \\(A^TA\\) should be invertible and well-conditioned (eigenvalues should not be too small, similarly with criteria for Harris corner detector). Thus it's easier to estimate the motion of a corner, then edge, then low texture region (flat).","title":"Aperture Problem"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#small-motion-assumption","text":"For taylor expansion, we want the motion as small as possbile. But probably not - at least larger than one pixel.","title":"Small Motion Assumption"},{"location":"Computer_Science_Courses/ICV/5_Image_Matching_and_Motion_Estimation/#solution","text":"Reduce the resolution Use the image pyramid","title":"Solution"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/","text":"Lecture 6 Image Stitching \u00b6 Image Warping \u00b6 Info Image filtering changes intensity of image. Image warping (\u7fd8\u66f2) changes shape of image. 2D Transformations \u00b6 Affine Transformations \u4eff\u5c04\u53d8\u6362 \u00b6 \\[ \\begin{bmatrix} x' \\\\ y' \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} a & b & c \\\\ d & e & f \\\\ 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} \\] \\[ \\begin{align} x' &= ax + by + c \\\\ y' &= dx + ey + f \\end{align} \\] \u81ea\u7531\u5ea6 (degree of freedom) \u4e3a 6 \uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u81f3\u5c11 3 \u7ec4\u70b9\uff0c\u4e5f\u5c31\u662f 6 \u4e2a\u65b9\u7a0b\uff0c\u4ee5\u80fd\u591f\u6c42\u89e3\u51fa \\(a, b, c, d, e, f\\) . Projective Transformation (Homography) \u5355\u5e94\u53d8\u6362 \u00b6 \\[ \\begin{bmatrix} x' \\\\ y' \\\\ 1 \\end{bmatrix} \\cong \\begin{bmatrix} h_{00} & h_{01} & h_{02} \\\\ h_{10} & h_{11} & h_{12} \\\\ h_{20} & h_{21} & h_{22} \\\\ \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} \\] \\[ \\begin{align} x' = \\frac{h_{00}x + h_{01}y + h_{02}}{h_{20}x + h_{11}y + h_{12}} y' = \\frac{h_{10}x + h_{11}y + h_{12}}{h_{20}x + h_{11}y + h_{12}} \\end{align} \\] Constraint: \u4ee4 \\(||(h_{00}, h_{01}, \\dots, h_{22})||\\) (\u5411\u91cf\u8303\u6570) \u89c4\u5b9a\u4e3a \\(1\\) \uff0c\u6216\u8005\u4ee4 \\(h_{22}\\) \u4e3a \\(1\\) . \u8003\u8651\u5230\u4ee5\u4e0a\u7684\u9650\u5236\u6761\u4ef6 (constraint)\uff0c\u81ea\u7531\u5ea6 (degree of freedom) \u4e3a 8 \uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u81f3\u5c11 4 \u7ec4\u70b9\uff0c\u4e5f\u5c31\u662f 8 \u4e2a\u65b9\u7a0b\uff0c\u4ee5\u80fd\u591f\u6c42\u89e3\u51fa \\(h_{ij}\\) . Summary \u00b6 Implementation \u00b6 \u51fa\u4e8e\u65b9\u4fbf\u548c\u53ef\u64cd\u4f5c\u6027\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u8868\u5f81\u6574\u4f53\u7fd8\u66f2\u7684\u51fd\u6570 \\(T\\) \u800c\u4e0d\u662f\u5bf9\u6bcf\u4e2a\u50cf\u7d20\u70b9\u91c7\u53d6\u4e0d\u540c\u7684\u7fd8\u66f2\u7b56\u7565. Forward Warping (Not so good) \u00b6 \u5047\u8bbe\u56fe\u50cf\u51fd\u6570 \\(f:(x, y) \\rightarrow (r, g, b)\\) \u7ecf\u8fc7\u4e86\u53d8\u6362 \\(T: (x, y) \\rightarrow (x', y')\\) \u5f97\u5230\u65b0\u7684\u56fe\u50cf\u51fd\u6570 \\(g:(x', y') \\rightarrow (r, g, b)\\) . If the transformed pixed lands inside the pixels - Quite complicated to solve it. Inverse Warping \u00b6 Why not consider inversely? If the transformed pixed lands inside the pixels Solution 2D Interpolation! Image Stitching \u00b6 \\[ \\begin{bmatrix} x' \\\\ y' \\\\ 1 \\end{bmatrix} \\cong T \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} \\] Image Matching \u00b6 \u901a\u8fc7\u56fe\u50cf\u5339\u914d\u5f97\u5230\u5339\u914d\u70b9\uff0c\u6bcf\u4e2a\u5339\u914d\u70b9\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u4ee5\u4e0a\u5f62\u5f0f\u7684\u77e9\u9635\u4e58\u6cd5\u7b49\u5f0f. Find \\(T\\) for Image Wraping \u00b6 Affine Transformations \u00b6 \u5bf9\u4e8e\u6bcf\u4e2a\u5339\u914d\uff0c \\[ \\begin{align} x' = ax + by + c \\\\ y' = dx + ey + f \\end{align} \\] \u77e9\u9635\u5f62\u5f0f\u4e3a \\[ \\begin{bmatrix} x' \\\\ y' \\end{bmatrix} = \\begin{bmatrix} x & y & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x & y & 1 \\end{bmatrix} \\begin{bmatrix} a \\\\ b \\\\ c \\\\ d \\\\ e \\\\ f \\end{bmatrix} \\] \u5bf9\u4e8e \\(n\\) \u4e2a\u5339\u914d\uff0c\u5f97\u5230\u4ee5\u4e0b\u65b9\u7a0b\u7ec4 \\[ \\begin{bmatrix} x_1 & y_1 & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_1 & y_1 & 1 \\\\ x_2 & y_2 & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_2 & y_2 & 1 \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ x_n & y_n & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_n & y_n & 1 \\\\ \\end{bmatrix} \\begin{bmatrix} a \\\\ b \\\\ c \\\\ d \\\\ e \\\\ f \\end{bmatrix} = \\begin{bmatrix} x_1' \\\\ y_1' \\\\ x_2' \\\\ y_2' \\\\ \\vdots \\\\ x_n' \\\\ y_n' \\end{bmatrix} \\] \u4e5f\u5373 \\[ \\mathbf{A}_{2n \\times 6} \\times \\mathbf{t}_{6 \\times 1} = \\mathbf{b}_{2n \\times 1} \\] Note \u867d\u7136\u9009\u62e9 3 \u7ec4\u70b9\u662f\u80fd\u591f\u89e3\u51fa \\(a, b, c, d, e, f\\) \u7684\u6700\u5c11\u6570\u91cf\uff0c\u4f46\u662f\u5f88\u53ef\u80fd\u5b58\u5728\u90e8\u5206\u884c\u662f\u7ebf\u6027\u76f8\u5173\u4ece\u800c\u5bfc\u81f4\u5947\u5f02\u77e9\u9635\uff0c\u9000\u5316\u4e3a\u6ca1\u6709\u552f\u4e00\u89e3. \u6240\u4ee5\u4e3a\u4e86\u80fd\u591f\u5f97\u5230 \\(a, b, c, d, e, f\\) \u7684\u503c\uff0c\u91c7\u7528\u7684\u65b9\u5f0f\u662f\u53d6\u8f83\u591a\u7684\u70b9\u7136\u540e\u901a\u8fc7\u6700\u5c0f\u4e8c\u4e58\u6cd5\u8ba1\u7b97\uff0c\u4e5f\u5373\u8ba9 \\(\\mathbf{t}\\) \u6700\u5c0f\u5316 \\(||\\mathbf{A} \\mathbf{t} - \\mathbf{b}||\\) . Method of Least Square \\[ \\begin{align} \\mathbf{A^{T}At} &= \\mathbf{A^{T}b} \\\\ t &= \\mathbf{A^{T}A^{-1}A^{T}b} \\end{align} \\] Projective Transformations \u00b6 \u7c7b\u4f3c\u5730\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5339\u914d\uff0c \\[ \\begin{align} x_i'(h_{20}x_i + h_{21} y_i + h_{22}) = h_{00}x_i + h_{01}y_i + h_{02} \\\\ y_i'(h_{20}x_i + h_{21} y_i + h_{22}) = h_{10}x_i + h_{11}y_i + h_{12} \\\\ \\end{align} \\] \u77e9\u9635\u5f62\u5f0f\u4e3a \\[ \\begin{bmatrix} x_i & y_i & 1 & 0 & 0 & 0 & -x_i'x_i & -x_i'y_i & -x_i'\\\\ 0 & 0 & 0 & x_i & y_i & 1 & -y_i'x_i & -y_i'y_i & -y_i' \\end{bmatrix} \\begin{bmatrix} h_{00} \\\\ h_{01} \\\\ h_{02} \\\\ h_{10} \\\\ h_{11} \\\\ h_{12} \\\\ h_{20} \\\\ h_{21} \\\\ h_{22} \\end{bmatrix} = \\begin{bmatrix} 0 \\\\ 0 \\end{bmatrix} \\] \u5bf9\u4e8e \\(n\\) \u4e2a\u5339\u914d\uff0c\u5f97\u5230\u4ee5\u4e0b\u65b9\u7a0b\u7ec4 \\[ \\begin{bmatrix} x_1 & y_1 & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_1 & y_1 & 1 \\\\ x_2 & y_2 & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_2 & y_2 & 1 \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ x_n & y_n & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_n & y_n & 1 \\\\ \\end{bmatrix} \\begin{bmatrix} a \\\\ b \\\\ c \\\\ d \\\\ e \\\\ f \\end{bmatrix} = \\begin{bmatrix} x_1' \\\\ y_1' \\\\ x_2' \\\\ y_2' \\\\ \\vdots \\\\ x_n' \\\\ y_n' \\end{bmatrix} \\] \u4e5f\u5373 \\[ \\mathbf{A}_{2n \\times 9} \\times \\mathbf{t}_{9 \\times 1} = \\mathbf{b}_{2n \\times 1} \\] \u540c\u6837\u5730\uff0c\u6211\u4eec\u8981\u6700\u5c0f\u5316 \\(||\\mathbf{Ah - 0}|| = \\mathbf{||Ah||}\\) . Contraint: \\(||\\mathbf{h}|| = 1\\) \u5982\u679c\u4f7f\u7528\u7684\u662f\u5411\u91cf\u8303\u6570\u4e3a \\(1\\) \u7684\u9650\u5236\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u786e\u5b9a \\(\\mathbf{h}\\) \u7684\u65b9\u5411 \\(\\mathbf{\\hat h}\\) . \u6570\u5b66\u4e0a\u53ef\u4ee5\u8bc1\u660e\u89e3 \\(\\mathbf{\\hat h}\\) \u662f \\(\\mathbf{A^{T}A}\\) \u6700\u5c0f\u7279\u5f81\u503c\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf. Robustness \u00b6 Outliers \u56fe\u50cf\u5339\u914d\u4e5f\u4e0d\u662f\u5b8c\u7f8e\u7684\uff0c\u53ef\u80fd\u6709\u90e8\u5206\u9519\u8bef\u7684\u5339\u914d\u70b9\u6210\u4e3a\u5b64\u7acb\u70b9 (outliner). Solution: RANSAC \u6bcf\u6b21\u968f\u673a\u53d6 \\(s\\) \u7ec4\u5339\u914d\u70b9. \u901a\u8fc7\u9009\u53d6\u7684\u5339\u914d\u70b9\u8ba1\u7b97\u51fa\u53d8\u6362\u77e9\u9635 \\(T\\) . \u5728\u6240\u6709\u7684\u5339\u914d\u70b9\u4e2d\uff0c\u7edf\u8ba1\u5728\u4e00\u5b9a\u8bef\u5dee\u8303\u56f4\u5185\u7b26\u5408\u53d8\u6362 \\(T\\) \u7684\u70b9 (inlier) \u7684\u6570\u91cf\u4f5c\u4e3a\u5f97\u5206. \u91cd\u590d \\(N\\) \u6b21\uff0c\u53d6\u5f97\u5206\u6700\u9ad8\u7684\u53d8\u6362 \\(T_0\\) . (Better Step) \u5bf9\u6240\u6709\u5927\u81f4\u7b26\u5408\u53d8\u6362 \\(T_0\\) \u7684\u5339\u914d\u70b9\u518d\u6b21\u8ba1\u7b97\u4e00\u4e2a\u5e73\u5747\u7684\u53d8\u6362\u77e9\u9635 \\(T\\) . Summary \u00b6 How to make image stitching? Input Images. Feature Matching. Compute transformation matrices \\(T\\) with RANSAC. Warp image 2 to image 1. Extension: Panaroma and Cylindrical Projection Problem: Drift Solution Small vertical errors accumulate over time. Apply correction s.t. the sum of drift is 0. \u4e5f\u5c31\u662f\u62cd\u6444\u5168\u666f\u56fe\u65f6\u5c3d\u53ef\u80fd\u51cf\u5c11\u4e0a\u4e0b\u6296\u52a8.","title":"Lecture 6"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#lecture-6-image-stitching","text":"","title":"Lecture 6 Image Stitching"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#image-warping","text":"Info Image filtering changes intensity of image. Image warping (\u7fd8\u66f2) changes shape of image.","title":"Image Warping"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#2d-transformations","text":"","title":"2D Transformations"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#affine-transformations","text":"\\[ \\begin{bmatrix} x' \\\\ y' \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} a & b & c \\\\ d & e & f \\\\ 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} \\] \\[ \\begin{align} x' &= ax + by + c \\\\ y' &= dx + ey + f \\end{align} \\] \u81ea\u7531\u5ea6 (degree of freedom) \u4e3a 6 \uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u81f3\u5c11 3 \u7ec4\u70b9\uff0c\u4e5f\u5c31\u662f 6 \u4e2a\u65b9\u7a0b\uff0c\u4ee5\u80fd\u591f\u6c42\u89e3\u51fa \\(a, b, c, d, e, f\\) .","title":"Affine Transformations \u4eff\u5c04\u53d8\u6362"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#projective-transformation-homography","text":"\\[ \\begin{bmatrix} x' \\\\ y' \\\\ 1 \\end{bmatrix} \\cong \\begin{bmatrix} h_{00} & h_{01} & h_{02} \\\\ h_{10} & h_{11} & h_{12} \\\\ h_{20} & h_{21} & h_{22} \\\\ \\end{bmatrix} \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} \\] \\[ \\begin{align} x' = \\frac{h_{00}x + h_{01}y + h_{02}}{h_{20}x + h_{11}y + h_{12}} y' = \\frac{h_{10}x + h_{11}y + h_{12}}{h_{20}x + h_{11}y + h_{12}} \\end{align} \\] Constraint: \u4ee4 \\(||(h_{00}, h_{01}, \\dots, h_{22})||\\) (\u5411\u91cf\u8303\u6570) \u89c4\u5b9a\u4e3a \\(1\\) \uff0c\u6216\u8005\u4ee4 \\(h_{22}\\) \u4e3a \\(1\\) . \u8003\u8651\u5230\u4ee5\u4e0a\u7684\u9650\u5236\u6761\u4ef6 (constraint)\uff0c\u81ea\u7531\u5ea6 (degree of freedom) \u4e3a 8 \uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u81f3\u5c11 4 \u7ec4\u70b9\uff0c\u4e5f\u5c31\u662f 8 \u4e2a\u65b9\u7a0b\uff0c\u4ee5\u80fd\u591f\u6c42\u89e3\u51fa \\(h_{ij}\\) .","title":"Projective Transformation (Homography) \u5355\u5e94\u53d8\u6362"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#summary","text":"","title":"Summary"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#implementation","text":"\u51fa\u4e8e\u65b9\u4fbf\u548c\u53ef\u64cd\u4f5c\u6027\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u8868\u5f81\u6574\u4f53\u7fd8\u66f2\u7684\u51fd\u6570 \\(T\\) \u800c\u4e0d\u662f\u5bf9\u6bcf\u4e2a\u50cf\u7d20\u70b9\u91c7\u53d6\u4e0d\u540c\u7684\u7fd8\u66f2\u7b56\u7565.","title":"Implementation"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#forward-warping-not-so-good","text":"\u5047\u8bbe\u56fe\u50cf\u51fd\u6570 \\(f:(x, y) \\rightarrow (r, g, b)\\) \u7ecf\u8fc7\u4e86\u53d8\u6362 \\(T: (x, y) \\rightarrow (x', y')\\) \u5f97\u5230\u65b0\u7684\u56fe\u50cf\u51fd\u6570 \\(g:(x', y') \\rightarrow (r, g, b)\\) . If the transformed pixed lands inside the pixels - Quite complicated to solve it.","title":"Forward Warping (Not so good)"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#inverse-warping","text":"Why not consider inversely? If the transformed pixed lands inside the pixels Solution 2D Interpolation!","title":"Inverse Warping"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#image-stitching","text":"\\[ \\begin{bmatrix} x' \\\\ y' \\\\ 1 \\end{bmatrix} \\cong T \\begin{bmatrix} x \\\\ y \\\\ 1 \\end{bmatrix} \\]","title":"Image Stitching"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#image-matching","text":"\u901a\u8fc7\u56fe\u50cf\u5339\u914d\u5f97\u5230\u5339\u914d\u70b9\uff0c\u6bcf\u4e2a\u5339\u914d\u70b9\u53ef\u4ee5\u63d0\u4f9b\u4e00\u4e2a\u4ee5\u4e0a\u5f62\u5f0f\u7684\u77e9\u9635\u4e58\u6cd5\u7b49\u5f0f.","title":"Image Matching"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#find-t-for-image-wraping","text":"","title":"Find \\(T\\) for Image Wraping"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#affine-transformations_1","text":"\u5bf9\u4e8e\u6bcf\u4e2a\u5339\u914d\uff0c \\[ \\begin{align} x' = ax + by + c \\\\ y' = dx + ey + f \\end{align} \\] \u77e9\u9635\u5f62\u5f0f\u4e3a \\[ \\begin{bmatrix} x' \\\\ y' \\end{bmatrix} = \\begin{bmatrix} x & y & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x & y & 1 \\end{bmatrix} \\begin{bmatrix} a \\\\ b \\\\ c \\\\ d \\\\ e \\\\ f \\end{bmatrix} \\] \u5bf9\u4e8e \\(n\\) \u4e2a\u5339\u914d\uff0c\u5f97\u5230\u4ee5\u4e0b\u65b9\u7a0b\u7ec4 \\[ \\begin{bmatrix} x_1 & y_1 & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_1 & y_1 & 1 \\\\ x_2 & y_2 & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_2 & y_2 & 1 \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ x_n & y_n & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_n & y_n & 1 \\\\ \\end{bmatrix} \\begin{bmatrix} a \\\\ b \\\\ c \\\\ d \\\\ e \\\\ f \\end{bmatrix} = \\begin{bmatrix} x_1' \\\\ y_1' \\\\ x_2' \\\\ y_2' \\\\ \\vdots \\\\ x_n' \\\\ y_n' \\end{bmatrix} \\] \u4e5f\u5373 \\[ \\mathbf{A}_{2n \\times 6} \\times \\mathbf{t}_{6 \\times 1} = \\mathbf{b}_{2n \\times 1} \\] Note \u867d\u7136\u9009\u62e9 3 \u7ec4\u70b9\u662f\u80fd\u591f\u89e3\u51fa \\(a, b, c, d, e, f\\) \u7684\u6700\u5c11\u6570\u91cf\uff0c\u4f46\u662f\u5f88\u53ef\u80fd\u5b58\u5728\u90e8\u5206\u884c\u662f\u7ebf\u6027\u76f8\u5173\u4ece\u800c\u5bfc\u81f4\u5947\u5f02\u77e9\u9635\uff0c\u9000\u5316\u4e3a\u6ca1\u6709\u552f\u4e00\u89e3. \u6240\u4ee5\u4e3a\u4e86\u80fd\u591f\u5f97\u5230 \\(a, b, c, d, e, f\\) \u7684\u503c\uff0c\u91c7\u7528\u7684\u65b9\u5f0f\u662f\u53d6\u8f83\u591a\u7684\u70b9\u7136\u540e\u901a\u8fc7\u6700\u5c0f\u4e8c\u4e58\u6cd5\u8ba1\u7b97\uff0c\u4e5f\u5373\u8ba9 \\(\\mathbf{t}\\) \u6700\u5c0f\u5316 \\(||\\mathbf{A} \\mathbf{t} - \\mathbf{b}||\\) . Method of Least Square \\[ \\begin{align} \\mathbf{A^{T}At} &= \\mathbf{A^{T}b} \\\\ t &= \\mathbf{A^{T}A^{-1}A^{T}b} \\end{align} \\]","title":"Affine Transformations"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#projective-transformations","text":"\u7c7b\u4f3c\u5730\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u5339\u914d\uff0c \\[ \\begin{align} x_i'(h_{20}x_i + h_{21} y_i + h_{22}) = h_{00}x_i + h_{01}y_i + h_{02} \\\\ y_i'(h_{20}x_i + h_{21} y_i + h_{22}) = h_{10}x_i + h_{11}y_i + h_{12} \\\\ \\end{align} \\] \u77e9\u9635\u5f62\u5f0f\u4e3a \\[ \\begin{bmatrix} x_i & y_i & 1 & 0 & 0 & 0 & -x_i'x_i & -x_i'y_i & -x_i'\\\\ 0 & 0 & 0 & x_i & y_i & 1 & -y_i'x_i & -y_i'y_i & -y_i' \\end{bmatrix} \\begin{bmatrix} h_{00} \\\\ h_{01} \\\\ h_{02} \\\\ h_{10} \\\\ h_{11} \\\\ h_{12} \\\\ h_{20} \\\\ h_{21} \\\\ h_{22} \\end{bmatrix} = \\begin{bmatrix} 0 \\\\ 0 \\end{bmatrix} \\] \u5bf9\u4e8e \\(n\\) \u4e2a\u5339\u914d\uff0c\u5f97\u5230\u4ee5\u4e0b\u65b9\u7a0b\u7ec4 \\[ \\begin{bmatrix} x_1 & y_1 & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_1 & y_1 & 1 \\\\ x_2 & y_2 & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_2 & y_2 & 1 \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ x_n & y_n & 1 & 0 & 0 & 0 \\\\ 0 & 0 & 0 & x_n & y_n & 1 \\\\ \\end{bmatrix} \\begin{bmatrix} a \\\\ b \\\\ c \\\\ d \\\\ e \\\\ f \\end{bmatrix} = \\begin{bmatrix} x_1' \\\\ y_1' \\\\ x_2' \\\\ y_2' \\\\ \\vdots \\\\ x_n' \\\\ y_n' \\end{bmatrix} \\] \u4e5f\u5373 \\[ \\mathbf{A}_{2n \\times 9} \\times \\mathbf{t}_{9 \\times 1} = \\mathbf{b}_{2n \\times 1} \\] \u540c\u6837\u5730\uff0c\u6211\u4eec\u8981\u6700\u5c0f\u5316 \\(||\\mathbf{Ah - 0}|| = \\mathbf{||Ah||}\\) . Contraint: \\(||\\mathbf{h}|| = 1\\) \u5982\u679c\u4f7f\u7528\u7684\u662f\u5411\u91cf\u8303\u6570\u4e3a \\(1\\) \u7684\u9650\u5236\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u786e\u5b9a \\(\\mathbf{h}\\) \u7684\u65b9\u5411 \\(\\mathbf{\\hat h}\\) . \u6570\u5b66\u4e0a\u53ef\u4ee5\u8bc1\u660e\u89e3 \\(\\mathbf{\\hat h}\\) \u662f \\(\\mathbf{A^{T}A}\\) \u6700\u5c0f\u7279\u5f81\u503c\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf.","title":"Projective Transformations"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#robustness","text":"Outliers \u56fe\u50cf\u5339\u914d\u4e5f\u4e0d\u662f\u5b8c\u7f8e\u7684\uff0c\u53ef\u80fd\u6709\u90e8\u5206\u9519\u8bef\u7684\u5339\u914d\u70b9\u6210\u4e3a\u5b64\u7acb\u70b9 (outliner). Solution: RANSAC \u6bcf\u6b21\u968f\u673a\u53d6 \\(s\\) \u7ec4\u5339\u914d\u70b9. \u901a\u8fc7\u9009\u53d6\u7684\u5339\u914d\u70b9\u8ba1\u7b97\u51fa\u53d8\u6362\u77e9\u9635 \\(T\\) . \u5728\u6240\u6709\u7684\u5339\u914d\u70b9\u4e2d\uff0c\u7edf\u8ba1\u5728\u4e00\u5b9a\u8bef\u5dee\u8303\u56f4\u5185\u7b26\u5408\u53d8\u6362 \\(T\\) \u7684\u70b9 (inlier) \u7684\u6570\u91cf\u4f5c\u4e3a\u5f97\u5206. \u91cd\u590d \\(N\\) \u6b21\uff0c\u53d6\u5f97\u5206\u6700\u9ad8\u7684\u53d8\u6362 \\(T_0\\) . (Better Step) \u5bf9\u6240\u6709\u5927\u81f4\u7b26\u5408\u53d8\u6362 \\(T_0\\) \u7684\u5339\u914d\u70b9\u518d\u6b21\u8ba1\u7b97\u4e00\u4e2a\u5e73\u5747\u7684\u53d8\u6362\u77e9\u9635 \\(T\\) .","title":"Robustness"},{"location":"Computer_Science_Courses/ICV/6_Image_Stitching/#summary_1","text":"How to make image stitching? Input Images. Feature Matching. Compute transformation matrices \\(T\\) with RANSAC. Warp image 2 to image 1. Extension: Panaroma and Cylindrical Projection Problem: Drift Solution Small vertical errors accumulate over time. Apply correction s.t. the sum of drift is 0. \u4e5f\u5c31\u662f\u62cd\u6444\u5168\u666f\u56fe\u65f6\u5c3d\u53ef\u80fd\u51cf\u5c11\u4e0a\u4e0b\u6296\u52a8.","title":"Summary"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/","text":"Lecture 7 Structure from Motion (SfM) \u00b6 Camera Calibration \u76f8\u673a\u6807\u5b9a \u00b6 \u76f8\u673a\u6807\u5b9a\u7684\u8fc7\u7a0b\uff0c\u5c31\u662f\u4ece\u4e16\u754c\u5750\u6807\u7cfb\u5411\u50cf\u7d20\u5750\u6807\u7cfb\u8f6c\u6362\u7684\u8fc7\u7a0b. \u9700\u8981\u6ce8\u610f\u7684\u56db\u4e2a\u5750\u6807\u7cfb\uff1a \u4e16\u754c\u5750\u6807\u7cfb (World Coordinates) \u76f8\u673a\u5750\u6807\u7cfb (Camera Coordinates) \u56fe\u50cf\u5750\u6807\u7cfb (Image Plane) \u50cf\u7d20\u5750\u6807\u7cfb (Image Sensor) \u5176\u4e2d\uff0c\u524d\u4e24\u4e2a\u5750\u6807\u7cfb\u7684\u8f6c\u6362\u77e9\u9635\u53c2\u6570\u88ab\u79f0\u4e3a \u76f8\u673a\u5916\u53c2 \uff1b\u540e\u4e09\u4e2a\u5750\u6807\u7cfb\u7684\u8f6c\u6362\u77e9\u9635\u53c2\u6570\u88ab\u79f0\u4e3a \u76f8\u673a\u5185\u53c2 . Principle Analysis \u539f\u7406\u5206\u6790 \u00b6 Coordinate Transformation \u00b6 \u4ece\u4e16\u754c\u5750\u6807\u7cfb\u5230\u76f8\u673a\u5750\u6807\u7cfb\u7684\u53d8\u6362. \u7279\u70b9 \u00b6 \u521a\u4f53\u53d8\u6362\uff0c\u53ea\u6709\u65cb\u8f6c\u548c\u5e73\u79fb\uff0c\u5bf9\u5e94\u65cb\u8f6c\u77e9\u9635 \\(R\\) \uff08 \\(R\\) \u662f \u5355\u4f4d\u6b63\u4ea4\u77e9\u9635 (Orthonormal) ) \u548c\u5e73\u79fb\u5411\u91cf \\(c_w\\) . \\[ \\mathbf{x}_c = R(\\mathbf{x}_w - \\mathbf{c}_w) = R \\mathbf{x}_w - R \\mathbf{c}_w \\overset{\\Delta}{=\\!=} = R \\mathbf{x}_w + \\mathbf{t}, \\text{ where } \\mathbf{t } = -R \\mathbf{c}_w. \\] \u6545\u8fd9\u4e2a\u53d8\u6362\u4e5f\u53ef\u4ee5\u7b49\u4ef7\u5730\u7528 \\(R\\) \u548c \\(\\mathbf{t}\\) \u6765\u8868\u5f81. \\[ \\mathbf{x}_c = \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} \\\\ r_{21} & r_{22} & r_{23} \\\\ r_{31} & r_{32} & r_{33} \\\\ \\end{bmatrix} \\begin{bmatrix} x_w \\\\ y_w \\\\ z_w \\end{bmatrix} + \\begin{bmatrix} t_x \\\\ t_y \\\\ t_z \\end{bmatrix} \\] \u540c\u6837\u8003\u8651\u9f50\u6b21\u5750\u6807\u7cfb \\[ \\mathbf{\\tilde x}_c = \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\\\ 1\\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y\\\\ r_{31} & r_{32} & r_{33} & t_z\\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x_w \\\\ y_w \\\\ z_w \\\\ 1 \\end{bmatrix} \\] Extrinsic Matrix (\u5916\u53c2\u77e9\u9635) \\[ M_{ext} = \\begin{bmatrix} R_{3\\times 3} & \\mathbf{t} \\\\ \\mathbf{0}_{1\\times 3} & 1 \\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y\\\\ r_{31} & r_{32} & r_{33} & t_z\\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\] \u4e5f\u53ef\u4ee5\u5199\u4f5c \\[ M_{ext} = \\begin{bmatrix} R_{3\\times 3} & \\mathbf{t} \\\\ \\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y\\\\ r_{31} & r_{32} & r_{33} & t_z\\\\ \\end{bmatrix} \\] Perspective Projection \u00b6 \u4ece\u76f8\u673a\u5750\u6807\u7cfb\u5230\u56fe\u50cf\u5750\u6807\u7cfb\u7684\u53d8\u6362. \u524d\u9762\u51e0\u4e2a Lecture \u4e2d\u5df2\u7ecf\u8ba8\u8bba\u8fc7\u8fd9\u4e00\u90e8\u5206 \u5185\u5bb9 . \u6b64\u5904\u4e0d\u518d\u8d58\u8ff0. \\[ \\begin{bmatrix} x_i \\\\ y_i \\\\ 1 \\end{bmatrix} \\cong \\begin{bmatrix} f & 0 & 0 & 0 \\\\ 0 & f & 0 & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\\\ 1 \\end{bmatrix} \\] Image Plane to Image Sensor Mapping \u00b6 \u4ece\u56fe\u50cf\u5750\u6807\u7cfb\u5230\u50cf\u7d20\u5750\u6807\u7cfb\u7684\u53d8\u6362. \u50cf\u7d20\u70b9 pixel \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u76f8\u673a\u81ea\u8eab\u7684\u5236\u4f5c\u5de5\u827a\u548c\u8981\u6c42\uff0c\u50cf\u7d20\u70b9\u5e76\u4e0d\u4e00\u5b9a\u662f\u6b63\u65b9\u5f62\uff0c\u800c\u662f\u77e9\u5f62\uff0c\u4e0e\u539f\u56fe\u50cf\u76f8\u6bd4\u5177\u6709\u4e00\u5b9a\u7684 \u7f29\u653e . \u8fd9\u4e00\u70b9\u5728\u89c6\u9891\u7684\u5236\u4f5c\u4e2d\u4e5f\u6709\u6240\u4f53\u73b0. \u6b64\u5916\uff0c\u7531\u4e8e\u56fe\u50cf\u5750\u6807\u7cfb\u662f\u4ece\u4e2d\u5fc3\u4e3a\u539f\u70b9\uff0c\u800c\u50cf\u7d20\u5750\u6807\u7cfb\u662f\u4ee5\u5de6\u4e0a\u89d2\u4e3a\u539f\u70b9\u7684\uff0c\u5750\u6807\u53d8\u6362\u8fd8\u9700\u8981\u4e00\u5b9a\u7684* \u5e73\u79fb . \\[ \\begin{align} u &= m_x f \\frac{x_c}{z_c} + c_x \\\\ v &= m_y f \\frac{y_c}{z_c} + c_y \\end{align} \\] \u7ed3\u5408\u4ee5\u4e0a\u4e24\u4e2a\u53d8\u6362\uff0c\u8bb0 \\(f_x = m_x f\\) , \\(f_y = m_y f\\) . \u5219\u4ece\u76f8\u673a\u5750\u6807\u7cfb\u5230\u50cf\u7d20\u5750\u6807\u7cfb\u7684\u53d8\u6362\u4e3a \\[ \\mathbf{\\tilde{u}} = \\begin{bmatrix} u \\\\ v \\\\ w \\end{bmatrix} \\cong \\begin{bmatrix} f_x & 0 & c_x & 0 \\\\ 0 & f_y & c_y & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\\\ 1 \\end{bmatrix} \\] Intrinsic Matrix (\u5185\u53c2\u77e9\u9635) \\[ M_{int} = \\begin{bmatrix} f_x & 0 & c_x & 0 \\\\ 0 & f_y & c_y & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\] \u4e5f\u53ef\u4ee5\u5199\u4f5c \\[ K = \\begin{bmatrix} f_x & 0 & c_x \\\\ 0 & f_y & c_y \\\\ 0 & 0 & 1 \\end{bmatrix} \\] Projection Matrix \\(P\\) World to Camera \\[ \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\\\ 1\\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y\\\\ r_{31} & r_{32} & r_{33} & t_z\\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x_w \\\\ y_w \\\\ z_w \\\\ 1 \\end{bmatrix} \\] \\[ \\mathbf{\\tilde u} = M_{int}\\mathbf{\\tilde x}_c \\] Camera to Pixel \\[ \\begin{bmatrix} u \\\\ v \\\\ w \\end{bmatrix} \\cong \\begin{bmatrix} f_x & 0 & c_x & 0 \\\\ 0 & f_y & c_y & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\\\ 1 \\end{bmatrix} \\] \\[ \\mathbf{\\tilde x}_c = M_{ext}\\mathbf{\\tilde x}_w \\] \u6545 \\[ \\mathbf{\\tilde u} = M_{int}M_{ext} \\mathbf{\\tilde x}_w = P \\mathbf{\\tilde x} \\] \u5176\u4e2d\uff0c \\(P\\) \u88ab\u79f0\u4e3a\u6295\u5f71\u77e9\u9635 (Projection Matrix). \\[ \\begin{bmatrix} u \\\\ v \\\\ w \\end{bmatrix} \\cong \\begin{bmatrix} p_{11} & p_{12} & p_{13} & p_{14} \\\\ p_{21} & p_{22} & p_{23} & p_{24} \\\\ p_{31} & p_{32} & p_{33} & p_{34} \\\\ p_{41} & p_{42} & p_{43} & p_{44} \\\\ \\end{bmatrix} \\begin{bmatrix} x_w \\\\ y_w \\\\ z_w \\\\ 1 \\end{bmatrix} \\] Implemetation \u00b6 Step 1. Capture an image of an object with known geometry. \u00b6 Step 2. Identify correspondences (Image Matching \u56fe\u50cf\u5339\u914d) between 3D scene points and image points. \u00b6 Step 3. For each corresponding point \\(i\\) , we get \u00b6 \\[ \\begin{bmatrix} u^{(i)} \\\\ v^{(i)} \\\\ w^{(i)} \\end{bmatrix} \\cong \\begin{bmatrix} p_{11} & p_{12} & p_{13} & p_{14} \\\\ p_{21} & p_{22} & p_{23} & p_{24} \\\\ p_{31} & p_{32} & p_{33} & p_{34} \\\\ p_{41} & p_{42} & p_{43} & p_{44} \\\\ \\end{bmatrix} \\begin{bmatrix} x_w^{(i)} \\\\ y_w^{(i)} \\\\ z_w^{(i)} \\\\ 1 \\end{bmatrix} \\] \\[ \\begin{align} u^{(i)} &= \\frac{p_{11}x_w^{(i)} + p_{12}y_w^{(i)} + p_{13}z_w^{(i)} + p_{14}}{p_{31}x_w^{(i)} + p_{32}y_w^{(i)} + p_{33}z_w^{(i)} + p_{34}} \\\\ v^{(i)} &= \\frac{p_{21}x_w^{(i)} + p_{22}y_w^{(i)} + p_{23}z_w^{(i)} + p_{24}}{p_{31}x_w^{(i)} + p_{32}y_w^{(i)} + p_{33}z_w^{(i)} + p_{34}} \\\\ \\end{align} \\] Step 4. Rearrange. \u00b6 \\[ \\scriptsize \\begin{bmatrix} x_w^{(1)} & y_w^{(1)} & z_w^{(1)} & 1 & 0 & 0 & 0 & 0 & -u_1x_w^{(1)} & -u_1y_w^{(1)} & -u_1z_w^{(1)} & -u_1 \\\\ 0 & 0 & 0 & 0 & x_w^{(1)} & y_w^{(1)} & z_w^{(1)} & 1 & -v_1x_w^{(1)} & -v_1y_w^{(1)} & -v_1z_w^{(1)} & -v_1 \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ x_w^{(i)} & y_w^{(i)} & z_w^{(i)} & 1 & 0 & 0 & 0 & 0 & -u_ix_w^{(i)} & -u_iy_w^{(i)} & -u_iz_w^{(i)} & -u_i \\\\ 0 & 0 & 0 & 0 & x_w^{(i)} & y_w^{(i)} & z_w^{(i)} & 1 & -v_ix_w^{(i)} & -v_iy_w^{(i)} & -v_iz_w^{(i)} & -v_i \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ x_w^{(n)} & y_w^{(n)} & z_w^{(n)} & 1 & 0 & 0 & 0 & 0 & -u_nx_w^{(n)} & -u_ny_w^{(n)} & -u_nz_w^{(n)} & -u_n \\\\ 0 & 0 & 0 & 0 & x_w^{(n)} & y_w^{(n)} & z_w^{(n)} & 1 & -v_nx_w^{(n)} & -v_ny_w^{(n)} & -v_nz_w^{(n)} & -v_n \\\\ \\end{bmatrix} \\begin{bmatrix} p_{11} \\\\ p_{12} \\\\ p_{13} \\\\ p_{14} \\\\ p_{21} \\\\ p_{22} \\\\ p_{23} \\\\ p_{24} \\\\ p_{31} \\\\ p_{32} \\\\ p_{33} \\\\ p_{34} \\end{bmatrix} = \\begin{bmatrix} 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\end{bmatrix} \\] \\[ i.e.\\ A \\mathbf{p} = 0 \\] Step 5 Solve for \\(P\\) . \u00b6 \u7c7b\u4f3c\u5730\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u51fa\u4e00\u5b9a\u7684\u9650\u5236 constraint. Option 1. \u4ee4 \\(p_{34} = 1\\) . Option 2. \u4ee4 \\(||p|| = 1\\) . \u5f97\u5230\u81ea\u7531\u5ea6\u4e3a \\(11\\) \uff0c\u81f3\u5c11\u9700\u8981 6 \u7ec4\u70b9. \u5e76\u540c\u6837\u8981\u6700\u5c0f\u5316 \\(||\\mathbf{Ap - 0}|| = \\mathbf{||Ap||}\\) . \u540c\u6837\u5982\u679c\u4f7f\u7528\u7684\u662f\u5411\u91cf\u8303\u6570\u4e3a \\(1\\) \u7684\u9650\u5236\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u786e\u5b9a \\(\\mathbf{p}\\) \u7684\u65b9\u5411 \\(\\mathbf{\\hat p}\\) . \u4e14 \\(\\mathbf{\\hat p}\\) \u662f \\(\\mathbf{A^{T}A}\\) \u6700\u5c0f\u7279\u5f81\u503c\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf. Step 6 From \\(P\\) to Answers \u00b6 \u7531 \\[ \\begin{bmatrix} p_{11} \\\\ p_{12} \\\\ p_{13} \\\\ p_{14} \\\\ p_{21} \\\\ p_{22} \\\\ p_{23} \\\\ p_{24} \\\\ p_{31} \\\\ p_{32} \\\\ p_{33} \\\\ p_{34} \\end{bmatrix} = \\begin{bmatrix} f_x & 0 & c_x & 0 \\\\ 0 & f_y & c_y & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y\\\\ r_{31} & r_{32} & r_{33} & t_z\\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\] \u6ce8\u610f\u5230 \\[ \\begin{bmatrix} p_{11} \\\\ p_{12} \\\\ p_{13} \\\\ p_{21} \\\\ p_{22} \\\\ p_{23} \\\\ p_{31} \\\\ p_{32} \\\\ p_{33} \\end{bmatrix} = \\begin{bmatrix} f_x & 0 & c_x \\\\ 0 & f_y & c_y \\\\ 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} r_{11} & r_{12} & r_{13} \\\\ r_{21} & r_{22} & r_{23} \\\\ r_{31} & r_{32} & r_{33} \\\\ \\end{bmatrix} = KR \\] \u5176\u4e2d \\(K\\) \u662f\u4e0a\u4e09\u89d2\u77e9\u9635 (Upper Right Triangular Matrix)\uff0c \\(R\\) \u662f\u5355\u4f4d\u6b63\u4ea4\u77e9\u9635 (Orthonormal Matrix). \u7531 QR \u5206\u89e3 (QR Factorization) \u53ef\u77e5\uff0c \\(K\\) \u4e0e \\(R\\) \u7684\u89e3\u662f\u552f\u4e00\u7684. \u518d\u7531 \\[ \\begin{bmatrix} p_{14} \\\\ p_{24} \\\\ p_{34} \\end{bmatrix} = \\begin{bmatrix} f_x & 0 & c_x & 0 \\\\ 0 & f_y & c_y & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} t_x \\\\ t_y \\\\ t_z \\end{bmatrix} = K \\mathbf{t} \\] \u6545\u53ef\u89e3\u5f97 \\[ \\mathbf{t} = K^{-1} \\begin{bmatrix} p_{14} \\\\ p_{24} \\\\ p_{34} \\end{bmatrix} \\] Problem: Distortion \u5b9e\u9645\u4e0a\u76f8\u673a\u81ea\u8eab\u4f1a\u5177\u6709\u4e00\u5b9a\u7684\u626d\u66f2\u7cfb\u6570\uff0c\u6211\u4eec\u5728\u6b64 \u5ffd\u7565 \u5b83\u7684\u5f71\u54cd. Perspective-n-Point Problem (PnP \u95ee\u9898) \u5f31\u5316\u4e00\u4e0b\u6761\u4ef6\uff0c\u5047\u8bbe\u5df2\u77e5\u76f8\u673a\u7684\u5185\u53c2\uff08\u5373\u77e9\u9635 \\(K\\) \uff09\uff0c\u6c42\u76f8\u673a\u7684\u5916\u53c2\uff08\u5373\u77e9\u9635 \\(R\\) \u548c \\(\\mathbf{t}\\) \uff09\uff0c\u4e5f\u5373\u76f8\u673a\u59ff\u6001 (camera pose). Direct Linear Transform (DLT) \u00b6 \u5373\u4ee5\u4e0a\u5728\u76f8\u673a\u6807\u5b9a\u4e2d\u63d0\u5230\u7684\u65b9\u6cd5\uff0c\u5148\u6c42\u89e3\u77e9\u9635 \\(P\\) \uff0c\u518d\u901a\u8fc7 \\(K\\) \u5f97\u5230 \\(R\\) \u548c \\(\\mathbf{t}\\) . P3P \u00b6 \u5373\u5df2\u77e5 \\(a, b, c, A, B, C\\) \u70b9\u5750\u6807\uff0c\u6c42 \\(O\\) \u5750\u6807. \u81f3\u5c11\u9700\u8981 \\(3\\) \u7ec4\u70b9 Intermediates. \u7531\u4f59\u5f26\u5b9a\u7406 \\[ \\begin{align} OA^2 + OB^2 - 2 OA \\cdot OB \\cos \\angle AOB &= AB^2 \\\\ OA^2 + OC^2 - 2 OB \\cdot OC \\cos \\angle BOC &= BC^2 \\\\ OA^2 + OC^2 - 2 OA \\cdot OC \\cos \\angle AOC &= AC^2 \\end{align} \\] \u4ee4 \\(x = \\frac{OA}{OC}, y = \\frac{OB}{OC}, v = \\frac{AB^2}{OC^2}, u = \\frac{BC^2}{AB^2}, w = \\frac{AC^2}{AB^2}\\) \uff0c\u5316\u7b80\u5f97 \\[ \\begin{align} (1 - u)y^2 - ux^2 - cos \\angle BOC y + 2uxy \\cos \\angle AOB + 1 &= 0 \\\\ (1 - w)x^2 - wy^2 - cos \\angle AOC y + 2wxy \\cos \\angle AOB + 1 &= 0 \\end{align} \\] \u4ee5\u4e0a\u65b9\u7a0b\u7ec4\u662f\u4e8c\u5143\u4e8c\u6b21\u65b9\u7a0b\u7ec4 (Binary Quadratic Equation)\uff0c\u6709\u56db\u7ec4\u89e3. \u5176\u4e2d\u6709\u4e24\u7ec4\u89e3\u7684 \\(O\\) \u5750\u6807\u5728 \u9762 \\(ABC\\) \u4e0e \u9762 \\(abc\\) \u4e4b\u95f4\uff0c\u820d\u53bb. \u8fd8\u9700\u8981\u4e00\u7ec4\u989d\u5916\u7684\u70b9\u6765\u786e\u5b9a\u552f\u4e00\u89e3\uff0c\u6545\u4e00\u5171\u9700\u8981 \\(4\\) \u7ec4\u70b9. PnP \u00b6 \u6700\u5c0f\u5316 \u91cd\u6295\u5f71\u8bef\u5dee (Reprojection Error) \\[ \\mathop{\\arg\\min\\limits_{R, \\mathbf{t}}} \\sum\\limits_i ||(p_i, K(RP_i + \\mathbf{t})||^2 \\] \u5176\u4e2d\uff0c \\(p_i\\) \u662f\u6295\u5f71\u9762\u4e0a\u7684\u4e8c\u7ef4\u5750\u6807\uff0c \\(P_i\\) \u662f\u7a7a\u95f4\u5185\u7684\u4e09\u7ef4\u5750\u6807. \u901a\u8fc7 P3P \u521d\u59cb\u5316\uff0cGauss-Newton \u6cd5\u4f18\u5316. EPnP \u00b6 one of the most popluar methods. time complexity \\(O(N)\\) . high accuracy. \u5927\u81f4\u65b9\u5f0f\u662f\u901a\u8fc7\u56db\u7ec4\u63a7\u5236\u70b9\u7684\u7ebf\u6027\u7ec4\u5408\u6c42\u89e3. Two-frame Structure from Motion \u00b6 Stereo vision \u7acb\u4f53\u89c6\u89c9 Compute 3D structure of the scene and camera poses from views (images). Two-frame SfM \u610f\u5728\u89e3\u51b3\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff1a\u5df2\u77e5\u4e24\u5f20\u56fe\u50cf\u548c\u76f8\u673a\u5185\u53c2\u77e9\u9635 ( \\(K_l(3 \\times 3)\\) \u4e0e \\(K_r(3 \\times 3)\\) )\uff0c\u6c42\u76f8\u673a\u7684\u4f4d\u7f6e\u4ee5\u53ca\u6240\u62cd\u6444\u4e3b\u4f53\u7684\u4e09\u7ef4\u4f4d\u7f6e\u5750\u6807. Principle Induction \u539f\u7406\u63a8\u5bfc \u00b6 Epipolar Geometry \u5bf9\u6781\u51e0\u4f55 \u5bf9\u6781\u51e0\u4f55\u63cf\u8ff0\u4e86\u4e00\u4e2a\u4e09\u7ef4\u70b9 \\(P\\) \u5728\u4e24\u4e2a\u89c6\u89d2\u7684\u4e8c\u7ef4\u6295\u5f71 \\(u_l, u_r\\) \u4e4b\u95f4\u7684\u51e0\u4f55\u5173\u7cfb. \u5e76\u901a\u8fc7\u8fd9\u4e2a\u51e0\u4f55\u5173\u7cfb\u5efa\u7acb\u4e24\u4e2a\u6444\u50cf\u673a\u4e4b\u95f4\u7684\u53d8\u6362\u5173\u7cfb\uff08\u5373\u7ed9\u51fa\u77e9\u9635 \\(R\\) \u548c \\(\\mathbf{t}\\) \uff09. Definition Epipole \u5bf9\u6781\u70b9 \uff1a\u4e00\u53f0\u6444\u50cf\u673a\u6295\u5f71\u5728\u53e6\u4e00\u53f0\u6444\u50cf\u673a\u4e2d\u7684\u70b9. \u5982\u56fe\u4e2d\u7684 \\(e_l\\) \u548c \\(e_r\\) . \u5bf9\u7ed9\u5b9a\u7684\u4e24\u53f0\u6444\u50cf\u673a\uff0c \\(e_l\\) \u548c \\(e_r\\) \u662f\u552f\u4e00\u7684. Epipolar Plane of Scene Point P \u5173\u4e8e P \u70b9\u7684\u5bf9\u6781\u9762 \uff1a\u7531 Scene Point \\(P\\) \u70b9\u548c\u4e24\u4e2a\u6444\u50cf\u673a \\(O_l\\) \u548c \\(O_r\\) \u5f62\u6210\u7684\u5e73\u9762. \u6bcf\u4e2a scene point \u6709\u552f\u4e00\u5bf9\u5e94\u7684\u5bf9\u6781\u9762. \u5bf9\u6781\u70b9\u5728\u5bf9\u6781\u9762\u4e0a. Essential Matrix \\(E\\) \u57fa\u672c\u77e9\u9635 \u00b6 \u5bf9\u4e8e\u4e00\u4e2a\u5bf9\u6781\u9762\uff0c\u4ee5\u4e0b\u7b49\u5f0f\u5173\u7cfb\u6210\u7acb\uff1a \\[ \\begin{align} \\mathbf{n} = \\mathbf{t} \\times \\mathbf{x}_l \\\\ \\\\ \\mathbf{x}_l \\cdot (\\mathbf{t} \\times \\mathbf{x}_l) = 0 \\end{align} \\] \u5176\u4e2d \\(\\mathbf{n}\\) \u88ab\u79f0\u4e3a Normal Vector. \u5047\u8bbe\u53f3\u8fb9\u7684\u6444\u50cf\u673a\u76f8\u5bf9\u5de6\u8fb9\u7684\u6444\u50cf\u673a\u8fdb\u884c\u521a\u4f53\u53d8\u6362 + \u5e73\u79fb\uff0c\u5373\uff1a \\[ \\begin{align} \\mathbf{x}_l &= R \\mathbf{x}_r + \\mathbf{t} \\\\ \\\\ \\begin{bmatrix} x_l \\\\ y_l \\\\ z_l \\end{bmatrix} &= \\begin{bmatrix} r_{11} & r_{12} & r_{13} \\\\ r_{21} & r_{22} & r_{23} \\\\ r_{31} & r_{32} & r_{33} \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ y_r \\end{bmatrix} + \\begin{bmatrix} t_x \\\\ t_y \\\\ t_z \\end{bmatrix} \\end{align} \\] \u8fdb\u4e00\u6b65\u6f14\u7ece\u63a8\u7406\uff0c\u5f97\u5230\uff1a \\[ \\begin{align} \\begin{bmatrix} x_l & y_l & z_l \\end{bmatrix} \\begin{bmatrix} t_yz_l - t_zy_l \\\\ t_zx_l - t_xz_l \\\\ t_xy_l - t_yx_l \\end{bmatrix} = 0 & \\text{, Cross-product definition} \\\\ \\\\ \\begin{bmatrix} x_l & y_l & z_l \\end{bmatrix} \\underbrace{ \\begin{bmatrix} 0 & -t_z & t_y \\\\ t_z & 0 & -t_x \\\\ -t_y & t_x & 0 \\end{bmatrix} }_{T_\\times} \\begin{bmatrix} x_l \\\\ y_l \\\\ z_l \\end{bmatrix} = 0 & \\text{, Matrix-vector form} \\end{align} \\] \u4ee3\u5165\u53d8\u6362\u77e9\u9635 \\[ \\small \\begin{bmatrix} x_l & y_l & z_l \\end{bmatrix} \\left( \\underbrace{ \\begin{bmatrix} 0 & -t_z & t_y \\\\ t_z & 0 & -t_x \\\\ -t_y & t_x & 0 \\end{bmatrix} }_{T_\\times} \\underbrace{ \\begin{bmatrix} r_{11} & r_{12} & r_{13} \\\\ r_{21} & r_{22} & r_{23} \\\\ r_{31} & r_{32} & r_{33} \\end{bmatrix} }_{R} \\begin{bmatrix} x_r \\\\ y_r \\\\ y_r \\end{bmatrix} + \\underbrace{ \\begin{bmatrix} 0 & -t_z & t_y \\\\ t_z & 0 & -t_x \\\\ -t_y & t_x & 0 \\end{bmatrix} \\begin{bmatrix} t_x \\\\ t_y \\\\ t_z \\end{bmatrix} }_{\\mathbf{t} \\times \\mathbf{t} = \\mathbf{0}} \\right) = 0 \\] \\[ \\begin{bmatrix} x_l & y_l & z_l \\end{bmatrix} \\underbrace{ \\begin{bmatrix} e_{11} & e_{12} & e_{13} \\\\ e_{21} & e_{22} & e_{23} \\\\ e_{31} & e_{32} & e_{33} \\end{bmatrix} }_{\\text{Essential Matrix } E} \\begin{bmatrix} x_r \\\\ y_r \\\\ y_r \\end{bmatrix} \\text{, where } E = T_\\times R \\] \u6ce8\u610f\u5230 \\(T_\\times\\) \u662f\u53cd\u5bf9\u79f0\u77e9\u9635 (skew-symmetric matrix) \u800c \\(R\\) \u662f\u5355\u4f4d\u6b63\u4ea4\u77e9\u9635 (orthonomal matrix)\uff0c\u7531 SVD \u5206\u89e3 (Singule Value Decomposition)\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece \\(E\\) \u552f\u4e00\u5206\u89e3\u5f97\u5230 \\(T_\\times\\) \u548c \\(R\\) . Fundemental Matrix \\(F\\) \u672c\u771f\u77e9\u9635 \u00b6 \u7531\u6295\u5f71\u5173\u7cfb\u4ee5\u53ca\u5185\u53c2\u77e9\u9635 \\(K\\) \uff0c\u5f97\u5230\uff1a \\[ \\small \\begin{align} \\text{Left Camera} && \\text{Right Camera} \\\\ z_l \\begin{bmatrix} u_l \\\\ v_l \\\\ 1 \\end{bmatrix} &= \\underbrace{ \\begin{bmatrix} f_x^{(l)} & 0 & o_x^{(l)} \\\\ 0 & f_y^{(l)} & o_y^{(l)} \\\\ 0 & 0 & 1 \\end{bmatrix} }_{K_l} \\begin{bmatrix} x_l \\\\ y_l \\\\ z_l \\end{bmatrix} & z_r \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} &= \\underbrace{ \\begin{bmatrix} f_x^{(r)} & 0 & o_x^{(r)} \\\\ 0 & f_y^{(r)} & o_y^{(r)} \\\\ 0 & 0 & 1 \\end{bmatrix} }_{K_r} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\end{bmatrix} \\\\ \\mathbf{x}_l^T &= \\begin{bmatrix} u_l & v_l & 1 \\end{bmatrix} z_l (K_l^{-1})^T & \\mathbf{x}_r &= K_r^{-1} z_r \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} \\end{align} \\] \u4ee3\u5165\u4ee5\u4e0a\u5f97\u5230\u7684\uff1a \\[ \\mathbf{x}^T_l E \\mathbf{x}_r = 0 \\] \u6709 \\[ \\require{canel} \\begin{bmatrix} u_l & v_l & 1 \\end{bmatrix} \\cancel{z_l} (K_l^{-1})^T E K_r^{-1} \\cancel{z_r} \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} = 0 \\] \u5373 \\[ \\begin{bmatrix} u_l & v_l & 1 \\end{bmatrix} F \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} = 0 \\text{, where } E = K_l^T F K_r \\] Implementation \u5b9e\u73b0 \u00b6 Step 1. Find a set ( \\(m\\) pairs) of corresponding features. \u627e\u5230\u4e00\u7ec4\uff08 \\(m\\) \u5bf9\uff09\u5339\u914d\u70b9. \u00b6 Least Number of Points At least 8 pairs: \\((u_l^{(i)}, v_l^{(i)})\\) \u2194 \\((u_r^{(i)}, v_r^{(i)})\\) NOTE that one pair only corresponds one equation. (not the same as before) Step 2. Build linear systems and solve for \\(F\\) . \u5efa\u7acb\u65b9\u7a0b\u7ec4\u5e76\u6c42\u89e3\u77e9\u9635 \\(F\\) . \u00b6 \u5bf9\u4e8e\u6bcf\u7ec4\u5339\u914d \\(i\\) \uff0c \\[ \\begin{bmatrix} u_l^{(i)} & v_l^{(i)} & 1 \\end{bmatrix} \\begin{bmatrix} f_{11} & f_{12} & f_{13} \\\\ f_{21} & f_{22} & f_{23} \\\\ f_{31} & f_{32} & f_{33} \\end{bmatrix} \\begin{bmatrix} u_r^{(i)} \\\\ v_r^{(i)} \\\\ 1 \\end{bmatrix} = 0 \\] \u5c55\u5f00\u5f97\uff0c \\[ \\small \\left( f_{11} u_r^{(i)} + f_{12} v_r^{(i)} + f_13 \\right)u_l^{(i)} + \\left( f_{21} u_r^{(i)} + f_{22} v_r^{(i)} + f_23 \\right)v_l^{(i)} + f_{31} u_r^{(i)} + f_{32} v_r^{(i)} + f_33 = 0 \\] \u5bf9\u6240\u6709\u9009\u62e9\u7684\u70b9\uff0c\u6709 \\[ \\small \\begin{bmatrix} u_l^{(1)}u_r^{(1)} & u_l^{(1)}v_r^{(1)} & u_l^{(1)} & v_l^{(1)}u_r^{(1)} & v_l^{(1)}v_r^{(1)} & v_l^{(1)} & u_r^{(1)} & v_r^{(1)} & 1 \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ u_l^{(i)}u_r^{(i)} & u_l^{(i)}v_r^{(i)} & u_l^{(i)} & v_l^{(i)}u_r^{(i)} & v_l^{(i)}v_r^{(i)} & v_l^{(i)} & u_r^{(i)} & v_r^{(i)} & 1 \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ u_l^{(m)}u_r^{(m)} & u_l^{(m)}v_r^{(m)} & u_l^{(m)} & v_l^{(m)}u_r^{(m)} & v_l^{(m)}v_r^{(m)} & v_l^{(m)} & u_r^{(m)} & v_r^{(m)} & 1 \\\\ \\end{bmatrix} \\begin{bmatrix} f_{11} \\\\ f_{12} \\\\ f_{13} \\\\ f_{21} \\\\ f_{22} \\\\ f_{23} \\\\ f_{31} \\\\ f_{32} \\\\ f_{33} \\\\ \\end{bmatrix} = \\begin{bmatrix} 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\end{bmatrix} \\] \\[ A \\mathbf{f} = \\mathbf{0} \\] \u540c\u6837\u5730 \uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u51fa\u4e00\u5b9a\u7684\u9650\u5236 constraint. Option 1. \u4ee4 \\(f_{33} = 1\\) . Option 2. \u4ee4 \\(||f|| = 1\\) . \u5f97\u5230\u81ea\u7531\u5ea6\u4e3a \\(8\\) \uff0c\u81f3\u5c11\u9700\u8981 8 \u7ec4\u70b9. \u5e76\u540c\u6837\u8981\u6700\u5c0f\u5316 \\(||\\mathbf{Af - 0}|| = \\mathbf{||Af||}\\) . \u540c\u6837\u5982\u679c\u4f7f\u7528\u7684\u662f\u5411\u91cf\u8303\u6570\u4e3a \\(1\\) \u7684\u9650\u5236\uff0c\u90a3\u4e48\u89e3\u5c31\u662f \\(\\mathbf{A^{T}A}\\) \u6700\u5c0f\u7279\u5f81\u503c\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf. Step 3. Find \\(E\\) and Extract \\(R, \\mathbf{t}\\) \u00b6 \\[ E = K_l^T F K_r \\] \u901a\u8fc7 SVD \u5206\u89e3\uff0c \\(E = T_\\times R\\) \u5f97\u5230 \\(T_\\times\\) \u548c \\(R\\) . \\(R\\) \u5373\u4e3a\u65cb\u8f6c\u77e9\u9635\uff0c \\(\\mathbf{t}\\) \u53ef\u4ee5\u901a\u8fc7 \\(T_\\times\\) \u76f4\u63a5\u5f97\u5230. Step 4. Find 3D Position of Scene Points \u00b6 \u73b0\u5728\u5df2\u7ecf\u6709\u4ee5\u4e0b\u7b49\u5f0f \\[ \\small \\begin{align} \\text{Left Camera} \\\\ \\begin{bmatrix} u_l \\\\ v_l \\\\ 1 \\end{bmatrix} &= \\begin{bmatrix} f_x^{(l)} & 0 & o_x^{(l)} & 0 \\\\ 0 & f_y^{(l)} & o_y^{(l)} & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x_l \\\\ y_l \\\\ z_l \\\\ 1 \\end{bmatrix} ,\\ \\begin{bmatrix} x_l \\\\ y_l \\\\ z_l \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y \\\\ r_{31} & r_{32} & r_{33} & t_z \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\\\ 1 \\end{bmatrix} \\\\ \\begin{bmatrix} u_l \\\\ v_l \\\\ 1 \\end{bmatrix} &= \\begin{bmatrix} f_x^{(l)} & 0 & o_x^{(l)} & 0 \\\\ 0 & f_y^{(l)} & o_y^{(l)} & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y \\\\ r_{31} & r_{32} & r_{33} & t_z \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\\\ 1 \\end{bmatrix} \\\\ \\\\ \\normalsize \\mathbf{\\tilde u}_l &= \\normalsize P_l \\mathbf{\\tilde x}_r \\\\ \\\\ \\small \\text{Right Camera} \\\\ \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} &= \\begin{bmatrix} f_x^{(r)} & 0 & o_x^{(r)} & 0 \\\\ 0 & f_y^{(r)} & o_y^{(r)} & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\\\ 1 \\end{bmatrix} \\\\ \\\\ \\normalsize \\mathbf{\\tilde u}_l &= \\normalsize M_{int_r} \\mathbf{\\tilde x}_r \\end{align} \\] \u7531 \\[ \\small \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} m_{11} & m_{12} & m_{13} & m_{14} \\\\ m_{21} & m_{22} & m_{23} & m_{24} \\\\ m_{31} & m_{32} & m_{33} & m_{34} \\\\ \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\\\ 1 \\end{bmatrix} ,\\ \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} p_{11} & p_{12} & p_{13} & p_{14} \\\\ p_{21} & p_{22} & p_{23} & p_{24} \\\\ p_{31} & p_{32} & p_{33} & p_{34} \\\\ \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\\\ 1 \\end{bmatrix} \\] \u6574\u7406\u5f97 \\[ \\underbrace{ \\begin{bmatrix} u_r m_{31} - m_{11} & u_r m_{32} - m_{12} & u_r m_{33} - m_{13} \\\\ v_r m_{31} - m_{21} & v_r m_{32} - m_{22} & v_r m_{33} - m_{23} \\\\ u_l p_{31} - p_{11} & u_l p_{32} - p_{12} & u_l p_{33} - p_{13} \\\\ v_l p_{31} - p_{21} & v_l p_{32} - p_{22} & v_l p_{33} - p_{23} \\end{bmatrix} }_{A_{4\\times 3}} \\underbrace{ \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\end{bmatrix} }_{\\mathbf{x}_r} = \\underbrace{ \\begin{bmatrix} m_{14} - m_{34} \\\\ m_{24} - m_{34} \\\\ p_{14} - p_{34} \\\\ p_{24} - p_{34} \\end{bmatrix} }_{\\mathbf{b}} \\] \u7531\u5206\u6790\u4e0a\u89e3\u7684\u552f\u4e00\u6027\uff0c\u7406\u8bba\u4e0a\u6709\u4e24\u884c\u662f\u7ebf\u6027\u76f8\u5173\u7684. \u4f46\u662f\u5728\u5b9e\u9645\u53d6\u70b9\u4e2d\u53ef\u80fd\u4f1a\u5b58\u5728\u4e00\u5b9a\u7684\u8bef\u5dee\uff0c\u6240\u4ee5\u4e3a\u4e86\u6700\u5927\u5316\u5229\u7528\u6570\u636e\u91cf\uff0c\u8fd8\u662f\u91c7\u7528\u6700\u5c0f\u4e8c\u4e58\u6cd5. \u7531\u6700\u5c0f\u4e8c\u4e58\u6cd5\u5f97\uff0c \\[ \\mathbf{x}_r = (A^TA)^{-1}A^T \\mathbf{b} \\] Non-linear Solution \u4e0a\u9762\u7684\u662f\u901a\u8fc7\u89e3\u7ebf\u6027\u7cfb\u7edf\u7684\u65b9\u6cd5\uff0c\u53e6\u4e00\u79cd\u60f3\u6cd5\u662f\u6700\u5c0f\u5316 \u91cd\u6620\u5c04\u8bef\u5dee (reprojection error) . \\[ \\text{cost}(P) = \\text{dist}(\\mathbf{u}_l, \\mathbf{\\hat u}_l)^2 + \\text{dist}(\\mathbf{u}_r, \\mathbf{\\hat u}_r)^2 \\] \u53e6\u5916\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u6cd5\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f18\u5316 \\(R\\) \u548c \\(\\mathbf{t}\\) . Multi-frame Structure from Motion \u00b6 \u4e0e Two-frame SfM \u7c7b\u4f3c\uff0c\u5df2\u77e5 \\(m\\) \u5f20\u56fe\u50cf\uff0c \\(n\\) \u4e2a\u4e09\u7ef4\u70b9\u4ee5\u53ca\u76f8\u673a\u5185\u53c2\u77e9\u9635\uff0c\u6c42\u76f8\u673a\u7684\u4f4d\u7f6e\u4ee5\u53ca\u6240\u62cd\u6444\u4e3b\u4f53\u7684\u4e09\u7ef4\u4f4d\u7f6e\u5750\u6807. \u4e5f\u5c31\u662f\u5bf9\u4e8e\u4ee5\u4e0b\u7b49\u5f0f\uff1a \\[ \\mathbf{u}_j^{(i)} = P_{proj}^{(i)} \\mathbf{P}_j \\text{, where } i = 1, \\dots, m, j = 1, \\dots, n \\] \u7531 \\(mn\\) \u4e2a\u6295\u5f71\u7684\u4e8c\u7ef4\u70b9 \\(\\mathbf{u}_j^{(i)}\\) \u6c42\u89e3 \\(m\\) \u4e2a\u6295\u5f71\u77e9\u9635 \\(P_{proj}^{(i)}\\) \u4e0e \\(n\\) \u4e2a\u4e09\u7ef4\u70b9\u5750\u6807 \\(P_j\\) . Solution: Sequential Structrue from Motion \u00b6 Step 1. Initialize camera motion and scene structure. \u521d\u59cb\u5316 \u00b6 \u9996\u5148\u9009\u4e24\u5f20\u56fe\u505a\u4e00\u6b21 Two-frame SfM. Step 2. Deal with an addition view. \u5904\u7406\u4e0b\u4e00\u5f20\u56fe \u00b6 \u5bf9\u4e8e\u6bcf\u65b0\u589e\u7684\u4e00\u5f20\u56fe\uff0c \u5bf9\u4e8e\u5df2\u7ecf\u5efa\u7acb\u4e09\u7ef4\u5750\u6807\u7684\u70b9\uff1a PnP \u95ee\u9898 . \u5bf9\u4e8e\u5c1a\u672a\u5efa\u7acb\u4e09\u7ef4\u5750\u6807\u7684\u70b9\uff1a\u505a Two-frame SfM. Step 3. Refine structure and motion: Bundle Adjustment. \u96c6\u675f\u8c03\u6574 \u00b6 \u5904\u7406\u5b8c\u6240\u6709\u7684\u56fe\u540e\uff0c\u518d\u901a\u8fc7\u4e00\u6b21 \u96c6\u675f\u8c03\u6574 \uff08\u5177\u4f53\u5b9e\u73b0\u662f LM \u7b97\u6cd5 \uff09\u5bf9\u4e09\u7ef4\u70b9\u5750\u6807\u548c\u76f8\u673a\u53c2\u6570\u505a\u8fdb\u4e00\u6b65\u4f18\u5316\uff0c\u5373\u6700\u5c0f\u5316 \u91cd\u6620\u5c04\u8bef\u5dee \uff08\u975e\u7ebf\u6027\u6700\u5c0f\u4e8c\u4e58\uff09\uff1a \\[ E(P_{proj}, \\mathbf{P}) = \\sum\\limits_{i=1}^m \\sum\\limits_{j=1}^n \\text{dist} \\left( u_j^{(i)}, P_{proj}^{(i)} \\mathbf{P}_j \\right)^2 \\] COLMAP \u00b6 COLMAP is a general-purpose Structure-from-Motion (SfM) and Multi-View Stereo (MVS) pipeline with a graphical and commandline interface. It offers a wide range of features for reconstruction of ordered and unordered image collections. Pipeline","title":"Lecture 7"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#lecture-7-structure-from-motion-sfm","text":"","title":"Lecture 7 Structure from Motion (SfM)"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#camera-calibration","text":"\u76f8\u673a\u6807\u5b9a\u7684\u8fc7\u7a0b\uff0c\u5c31\u662f\u4ece\u4e16\u754c\u5750\u6807\u7cfb\u5411\u50cf\u7d20\u5750\u6807\u7cfb\u8f6c\u6362\u7684\u8fc7\u7a0b. \u9700\u8981\u6ce8\u610f\u7684\u56db\u4e2a\u5750\u6807\u7cfb\uff1a \u4e16\u754c\u5750\u6807\u7cfb (World Coordinates) \u76f8\u673a\u5750\u6807\u7cfb (Camera Coordinates) \u56fe\u50cf\u5750\u6807\u7cfb (Image Plane) \u50cf\u7d20\u5750\u6807\u7cfb (Image Sensor) \u5176\u4e2d\uff0c\u524d\u4e24\u4e2a\u5750\u6807\u7cfb\u7684\u8f6c\u6362\u77e9\u9635\u53c2\u6570\u88ab\u79f0\u4e3a \u76f8\u673a\u5916\u53c2 \uff1b\u540e\u4e09\u4e2a\u5750\u6807\u7cfb\u7684\u8f6c\u6362\u77e9\u9635\u53c2\u6570\u88ab\u79f0\u4e3a \u76f8\u673a\u5185\u53c2 .","title":"Camera Calibration \u76f8\u673a\u6807\u5b9a"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#principle-analysis","text":"","title":"Principle Analysis \u539f\u7406\u5206\u6790"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#coordinate-transformation","text":"\u4ece\u4e16\u754c\u5750\u6807\u7cfb\u5230\u76f8\u673a\u5750\u6807\u7cfb\u7684\u53d8\u6362.","title":"Coordinate Transformation"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#_1","text":"\u521a\u4f53\u53d8\u6362\uff0c\u53ea\u6709\u65cb\u8f6c\u548c\u5e73\u79fb\uff0c\u5bf9\u5e94\u65cb\u8f6c\u77e9\u9635 \\(R\\) \uff08 \\(R\\) \u662f \u5355\u4f4d\u6b63\u4ea4\u77e9\u9635 (Orthonormal) ) \u548c\u5e73\u79fb\u5411\u91cf \\(c_w\\) . \\[ \\mathbf{x}_c = R(\\mathbf{x}_w - \\mathbf{c}_w) = R \\mathbf{x}_w - R \\mathbf{c}_w \\overset{\\Delta}{=\\!=} = R \\mathbf{x}_w + \\mathbf{t}, \\text{ where } \\mathbf{t } = -R \\mathbf{c}_w. \\] \u6545\u8fd9\u4e2a\u53d8\u6362\u4e5f\u53ef\u4ee5\u7b49\u4ef7\u5730\u7528 \\(R\\) \u548c \\(\\mathbf{t}\\) \u6765\u8868\u5f81. \\[ \\mathbf{x}_c = \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} \\\\ r_{21} & r_{22} & r_{23} \\\\ r_{31} & r_{32} & r_{33} \\\\ \\end{bmatrix} \\begin{bmatrix} x_w \\\\ y_w \\\\ z_w \\end{bmatrix} + \\begin{bmatrix} t_x \\\\ t_y \\\\ t_z \\end{bmatrix} \\] \u540c\u6837\u8003\u8651\u9f50\u6b21\u5750\u6807\u7cfb \\[ \\mathbf{\\tilde x}_c = \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\\\ 1\\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y\\\\ r_{31} & r_{32} & r_{33} & t_z\\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x_w \\\\ y_w \\\\ z_w \\\\ 1 \\end{bmatrix} \\] Extrinsic Matrix (\u5916\u53c2\u77e9\u9635) \\[ M_{ext} = \\begin{bmatrix} R_{3\\times 3} & \\mathbf{t} \\\\ \\mathbf{0}_{1\\times 3} & 1 \\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y\\\\ r_{31} & r_{32} & r_{33} & t_z\\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\] \u4e5f\u53ef\u4ee5\u5199\u4f5c \\[ M_{ext} = \\begin{bmatrix} R_{3\\times 3} & \\mathbf{t} \\\\ \\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y\\\\ r_{31} & r_{32} & r_{33} & t_z\\\\ \\end{bmatrix} \\]","title":"\u7279\u70b9"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#perspective-projection","text":"\u4ece\u76f8\u673a\u5750\u6807\u7cfb\u5230\u56fe\u50cf\u5750\u6807\u7cfb\u7684\u53d8\u6362. \u524d\u9762\u51e0\u4e2a Lecture \u4e2d\u5df2\u7ecf\u8ba8\u8bba\u8fc7\u8fd9\u4e00\u90e8\u5206 \u5185\u5bb9 . \u6b64\u5904\u4e0d\u518d\u8d58\u8ff0. \\[ \\begin{bmatrix} x_i \\\\ y_i \\\\ 1 \\end{bmatrix} \\cong \\begin{bmatrix} f & 0 & 0 & 0 \\\\ 0 & f & 0 & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\\\ 1 \\end{bmatrix} \\]","title":"Perspective Projection"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#image-plane-to-image-sensor-mapping","text":"\u4ece\u56fe\u50cf\u5750\u6807\u7cfb\u5230\u50cf\u7d20\u5750\u6807\u7cfb\u7684\u53d8\u6362. \u50cf\u7d20\u70b9 pixel \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u7531\u4e8e\u76f8\u673a\u81ea\u8eab\u7684\u5236\u4f5c\u5de5\u827a\u548c\u8981\u6c42\uff0c\u50cf\u7d20\u70b9\u5e76\u4e0d\u4e00\u5b9a\u662f\u6b63\u65b9\u5f62\uff0c\u800c\u662f\u77e9\u5f62\uff0c\u4e0e\u539f\u56fe\u50cf\u76f8\u6bd4\u5177\u6709\u4e00\u5b9a\u7684 \u7f29\u653e . \u8fd9\u4e00\u70b9\u5728\u89c6\u9891\u7684\u5236\u4f5c\u4e2d\u4e5f\u6709\u6240\u4f53\u73b0. \u6b64\u5916\uff0c\u7531\u4e8e\u56fe\u50cf\u5750\u6807\u7cfb\u662f\u4ece\u4e2d\u5fc3\u4e3a\u539f\u70b9\uff0c\u800c\u50cf\u7d20\u5750\u6807\u7cfb\u662f\u4ee5\u5de6\u4e0a\u89d2\u4e3a\u539f\u70b9\u7684\uff0c\u5750\u6807\u53d8\u6362\u8fd8\u9700\u8981\u4e00\u5b9a\u7684* \u5e73\u79fb . \\[ \\begin{align} u &= m_x f \\frac{x_c}{z_c} + c_x \\\\ v &= m_y f \\frac{y_c}{z_c} + c_y \\end{align} \\] \u7ed3\u5408\u4ee5\u4e0a\u4e24\u4e2a\u53d8\u6362\uff0c\u8bb0 \\(f_x = m_x f\\) , \\(f_y = m_y f\\) . \u5219\u4ece\u76f8\u673a\u5750\u6807\u7cfb\u5230\u50cf\u7d20\u5750\u6807\u7cfb\u7684\u53d8\u6362\u4e3a \\[ \\mathbf{\\tilde{u}} = \\begin{bmatrix} u \\\\ v \\\\ w \\end{bmatrix} \\cong \\begin{bmatrix} f_x & 0 & c_x & 0 \\\\ 0 & f_y & c_y & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\\\ 1 \\end{bmatrix} \\] Intrinsic Matrix (\u5185\u53c2\u77e9\u9635) \\[ M_{int} = \\begin{bmatrix} f_x & 0 & c_x & 0 \\\\ 0 & f_y & c_y & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\] \u4e5f\u53ef\u4ee5\u5199\u4f5c \\[ K = \\begin{bmatrix} f_x & 0 & c_x \\\\ 0 & f_y & c_y \\\\ 0 & 0 & 1 \\end{bmatrix} \\] Projection Matrix \\(P\\) World to Camera \\[ \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\\\ 1\\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y\\\\ r_{31} & r_{32} & r_{33} & t_z\\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x_w \\\\ y_w \\\\ z_w \\\\ 1 \\end{bmatrix} \\] \\[ \\mathbf{\\tilde u} = M_{int}\\mathbf{\\tilde x}_c \\] Camera to Pixel \\[ \\begin{bmatrix} u \\\\ v \\\\ w \\end{bmatrix} \\cong \\begin{bmatrix} f_x & 0 & c_x & 0 \\\\ 0 & f_y & c_y & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x_c \\\\ y_c \\\\ z_c \\\\ 1 \\end{bmatrix} \\] \\[ \\mathbf{\\tilde x}_c = M_{ext}\\mathbf{\\tilde x}_w \\] \u6545 \\[ \\mathbf{\\tilde u} = M_{int}M_{ext} \\mathbf{\\tilde x}_w = P \\mathbf{\\tilde x} \\] \u5176\u4e2d\uff0c \\(P\\) \u88ab\u79f0\u4e3a\u6295\u5f71\u77e9\u9635 (Projection Matrix). \\[ \\begin{bmatrix} u \\\\ v \\\\ w \\end{bmatrix} \\cong \\begin{bmatrix} p_{11} & p_{12} & p_{13} & p_{14} \\\\ p_{21} & p_{22} & p_{23} & p_{24} \\\\ p_{31} & p_{32} & p_{33} & p_{34} \\\\ p_{41} & p_{42} & p_{43} & p_{44} \\\\ \\end{bmatrix} \\begin{bmatrix} x_w \\\\ y_w \\\\ z_w \\\\ 1 \\end{bmatrix} \\]","title":"Image Plane to Image Sensor Mapping"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#implemetation","text":"","title":"Implemetation"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-1-capture-an-image-of-an-object-with-known-geometry","text":"","title":"Step 1. Capture an image of an object with known geometry."},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-2-identify-correspondences-image-matching-between-3d-scene-points-and-image-points","text":"","title":"Step 2. Identify correspondences (Image Matching \u56fe\u50cf\u5339\u914d) between 3D scene points and image points."},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-3-for-each-corresponding-point-i-we-get","text":"\\[ \\begin{bmatrix} u^{(i)} \\\\ v^{(i)} \\\\ w^{(i)} \\end{bmatrix} \\cong \\begin{bmatrix} p_{11} & p_{12} & p_{13} & p_{14} \\\\ p_{21} & p_{22} & p_{23} & p_{24} \\\\ p_{31} & p_{32} & p_{33} & p_{34} \\\\ p_{41} & p_{42} & p_{43} & p_{44} \\\\ \\end{bmatrix} \\begin{bmatrix} x_w^{(i)} \\\\ y_w^{(i)} \\\\ z_w^{(i)} \\\\ 1 \\end{bmatrix} \\] \\[ \\begin{align} u^{(i)} &= \\frac{p_{11}x_w^{(i)} + p_{12}y_w^{(i)} + p_{13}z_w^{(i)} + p_{14}}{p_{31}x_w^{(i)} + p_{32}y_w^{(i)} + p_{33}z_w^{(i)} + p_{34}} \\\\ v^{(i)} &= \\frac{p_{21}x_w^{(i)} + p_{22}y_w^{(i)} + p_{23}z_w^{(i)} + p_{24}}{p_{31}x_w^{(i)} + p_{32}y_w^{(i)} + p_{33}z_w^{(i)} + p_{34}} \\\\ \\end{align} \\]","title":"Step 3. For each corresponding point \\(i\\),  we get"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-4-rearrange","text":"\\[ \\scriptsize \\begin{bmatrix} x_w^{(1)} & y_w^{(1)} & z_w^{(1)} & 1 & 0 & 0 & 0 & 0 & -u_1x_w^{(1)} & -u_1y_w^{(1)} & -u_1z_w^{(1)} & -u_1 \\\\ 0 & 0 & 0 & 0 & x_w^{(1)} & y_w^{(1)} & z_w^{(1)} & 1 & -v_1x_w^{(1)} & -v_1y_w^{(1)} & -v_1z_w^{(1)} & -v_1 \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ x_w^{(i)} & y_w^{(i)} & z_w^{(i)} & 1 & 0 & 0 & 0 & 0 & -u_ix_w^{(i)} & -u_iy_w^{(i)} & -u_iz_w^{(i)} & -u_i \\\\ 0 & 0 & 0 & 0 & x_w^{(i)} & y_w^{(i)} & z_w^{(i)} & 1 & -v_ix_w^{(i)} & -v_iy_w^{(i)} & -v_iz_w^{(i)} & -v_i \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ x_w^{(n)} & y_w^{(n)} & z_w^{(n)} & 1 & 0 & 0 & 0 & 0 & -u_nx_w^{(n)} & -u_ny_w^{(n)} & -u_nz_w^{(n)} & -u_n \\\\ 0 & 0 & 0 & 0 & x_w^{(n)} & y_w^{(n)} & z_w^{(n)} & 1 & -v_nx_w^{(n)} & -v_ny_w^{(n)} & -v_nz_w^{(n)} & -v_n \\\\ \\end{bmatrix} \\begin{bmatrix} p_{11} \\\\ p_{12} \\\\ p_{13} \\\\ p_{14} \\\\ p_{21} \\\\ p_{22} \\\\ p_{23} \\\\ p_{24} \\\\ p_{31} \\\\ p_{32} \\\\ p_{33} \\\\ p_{34} \\end{bmatrix} = \\begin{bmatrix} 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\end{bmatrix} \\] \\[ i.e.\\ A \\mathbf{p} = 0 \\]","title":"Step 4. Rearrange."},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-5-solve-for-p","text":"\u7c7b\u4f3c\u5730\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u51fa\u4e00\u5b9a\u7684\u9650\u5236 constraint. Option 1. \u4ee4 \\(p_{34} = 1\\) . Option 2. \u4ee4 \\(||p|| = 1\\) . \u5f97\u5230\u81ea\u7531\u5ea6\u4e3a \\(11\\) \uff0c\u81f3\u5c11\u9700\u8981 6 \u7ec4\u70b9. \u5e76\u540c\u6837\u8981\u6700\u5c0f\u5316 \\(||\\mathbf{Ap - 0}|| = \\mathbf{||Ap||}\\) . \u540c\u6837\u5982\u679c\u4f7f\u7528\u7684\u662f\u5411\u91cf\u8303\u6570\u4e3a \\(1\\) \u7684\u9650\u5236\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u786e\u5b9a \\(\\mathbf{p}\\) \u7684\u65b9\u5411 \\(\\mathbf{\\hat p}\\) . \u4e14 \\(\\mathbf{\\hat p}\\) \u662f \\(\\mathbf{A^{T}A}\\) \u6700\u5c0f\u7279\u5f81\u503c\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf.","title":"Step 5 Solve for \\(P\\)."},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-6-from-p-to-answers","text":"\u7531 \\[ \\begin{bmatrix} p_{11} \\\\ p_{12} \\\\ p_{13} \\\\ p_{14} \\\\ p_{21} \\\\ p_{22} \\\\ p_{23} \\\\ p_{24} \\\\ p_{31} \\\\ p_{32} \\\\ p_{33} \\\\ p_{34} \\end{bmatrix} = \\begin{bmatrix} f_x & 0 & c_x & 0 \\\\ 0 & f_y & c_y & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y\\\\ r_{31} & r_{32} & r_{33} & t_z\\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\] \u6ce8\u610f\u5230 \\[ \\begin{bmatrix} p_{11} \\\\ p_{12} \\\\ p_{13} \\\\ p_{21} \\\\ p_{22} \\\\ p_{23} \\\\ p_{31} \\\\ p_{32} \\\\ p_{33} \\end{bmatrix} = \\begin{bmatrix} f_x & 0 & c_x \\\\ 0 & f_y & c_y \\\\ 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} r_{11} & r_{12} & r_{13} \\\\ r_{21} & r_{22} & r_{23} \\\\ r_{31} & r_{32} & r_{33} \\\\ \\end{bmatrix} = KR \\] \u5176\u4e2d \\(K\\) \u662f\u4e0a\u4e09\u89d2\u77e9\u9635 (Upper Right Triangular Matrix)\uff0c \\(R\\) \u662f\u5355\u4f4d\u6b63\u4ea4\u77e9\u9635 (Orthonormal Matrix). \u7531 QR \u5206\u89e3 (QR Factorization) \u53ef\u77e5\uff0c \\(K\\) \u4e0e \\(R\\) \u7684\u89e3\u662f\u552f\u4e00\u7684. \u518d\u7531 \\[ \\begin{bmatrix} p_{14} \\\\ p_{24} \\\\ p_{34} \\end{bmatrix} = \\begin{bmatrix} f_x & 0 & c_x & 0 \\\\ 0 & f_y & c_y & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} t_x \\\\ t_y \\\\ t_z \\end{bmatrix} = K \\mathbf{t} \\] \u6545\u53ef\u89e3\u5f97 \\[ \\mathbf{t} = K^{-1} \\begin{bmatrix} p_{14} \\\\ p_{24} \\\\ p_{34} \\end{bmatrix} \\] Problem: Distortion \u5b9e\u9645\u4e0a\u76f8\u673a\u81ea\u8eab\u4f1a\u5177\u6709\u4e00\u5b9a\u7684\u626d\u66f2\u7cfb\u6570\uff0c\u6211\u4eec\u5728\u6b64 \u5ffd\u7565 \u5b83\u7684\u5f71\u54cd. Perspective-n-Point Problem (PnP \u95ee\u9898) \u5f31\u5316\u4e00\u4e0b\u6761\u4ef6\uff0c\u5047\u8bbe\u5df2\u77e5\u76f8\u673a\u7684\u5185\u53c2\uff08\u5373\u77e9\u9635 \\(K\\) \uff09\uff0c\u6c42\u76f8\u673a\u7684\u5916\u53c2\uff08\u5373\u77e9\u9635 \\(R\\) \u548c \\(\\mathbf{t}\\) \uff09\uff0c\u4e5f\u5373\u76f8\u673a\u59ff\u6001 (camera pose).","title":"Step 6 From \\(P\\) to Answers"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#direct-linear-transform-dlt","text":"\u5373\u4ee5\u4e0a\u5728\u76f8\u673a\u6807\u5b9a\u4e2d\u63d0\u5230\u7684\u65b9\u6cd5\uff0c\u5148\u6c42\u89e3\u77e9\u9635 \\(P\\) \uff0c\u518d\u901a\u8fc7 \\(K\\) \u5f97\u5230 \\(R\\) \u548c \\(\\mathbf{t}\\) .","title":"Direct Linear Transform (DLT)"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#p3p","text":"\u5373\u5df2\u77e5 \\(a, b, c, A, B, C\\) \u70b9\u5750\u6807\uff0c\u6c42 \\(O\\) \u5750\u6807. \u81f3\u5c11\u9700\u8981 \\(3\\) \u7ec4\u70b9 Intermediates. \u7531\u4f59\u5f26\u5b9a\u7406 \\[ \\begin{align} OA^2 + OB^2 - 2 OA \\cdot OB \\cos \\angle AOB &= AB^2 \\\\ OA^2 + OC^2 - 2 OB \\cdot OC \\cos \\angle BOC &= BC^2 \\\\ OA^2 + OC^2 - 2 OA \\cdot OC \\cos \\angle AOC &= AC^2 \\end{align} \\] \u4ee4 \\(x = \\frac{OA}{OC}, y = \\frac{OB}{OC}, v = \\frac{AB^2}{OC^2}, u = \\frac{BC^2}{AB^2}, w = \\frac{AC^2}{AB^2}\\) \uff0c\u5316\u7b80\u5f97 \\[ \\begin{align} (1 - u)y^2 - ux^2 - cos \\angle BOC y + 2uxy \\cos \\angle AOB + 1 &= 0 \\\\ (1 - w)x^2 - wy^2 - cos \\angle AOC y + 2wxy \\cos \\angle AOB + 1 &= 0 \\end{align} \\] \u4ee5\u4e0a\u65b9\u7a0b\u7ec4\u662f\u4e8c\u5143\u4e8c\u6b21\u65b9\u7a0b\u7ec4 (Binary Quadratic Equation)\uff0c\u6709\u56db\u7ec4\u89e3. \u5176\u4e2d\u6709\u4e24\u7ec4\u89e3\u7684 \\(O\\) \u5750\u6807\u5728 \u9762 \\(ABC\\) \u4e0e \u9762 \\(abc\\) \u4e4b\u95f4\uff0c\u820d\u53bb. \u8fd8\u9700\u8981\u4e00\u7ec4\u989d\u5916\u7684\u70b9\u6765\u786e\u5b9a\u552f\u4e00\u89e3\uff0c\u6545\u4e00\u5171\u9700\u8981 \\(4\\) \u7ec4\u70b9.","title":"P3P"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#pnp","text":"\u6700\u5c0f\u5316 \u91cd\u6295\u5f71\u8bef\u5dee (Reprojection Error) \\[ \\mathop{\\arg\\min\\limits_{R, \\mathbf{t}}} \\sum\\limits_i ||(p_i, K(RP_i + \\mathbf{t})||^2 \\] \u5176\u4e2d\uff0c \\(p_i\\) \u662f\u6295\u5f71\u9762\u4e0a\u7684\u4e8c\u7ef4\u5750\u6807\uff0c \\(P_i\\) \u662f\u7a7a\u95f4\u5185\u7684\u4e09\u7ef4\u5750\u6807. \u901a\u8fc7 P3P \u521d\u59cb\u5316\uff0cGauss-Newton \u6cd5\u4f18\u5316.","title":"PnP"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#epnp","text":"one of the most popluar methods. time complexity \\(O(N)\\) . high accuracy. \u5927\u81f4\u65b9\u5f0f\u662f\u901a\u8fc7\u56db\u7ec4\u63a7\u5236\u70b9\u7684\u7ebf\u6027\u7ec4\u5408\u6c42\u89e3.","title":"EPnP"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#two-frame-structure-from-motion","text":"Stereo vision \u7acb\u4f53\u89c6\u89c9 Compute 3D structure of the scene and camera poses from views (images). Two-frame SfM \u610f\u5728\u89e3\u51b3\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff1a\u5df2\u77e5\u4e24\u5f20\u56fe\u50cf\u548c\u76f8\u673a\u5185\u53c2\u77e9\u9635 ( \\(K_l(3 \\times 3)\\) \u4e0e \\(K_r(3 \\times 3)\\) )\uff0c\u6c42\u76f8\u673a\u7684\u4f4d\u7f6e\u4ee5\u53ca\u6240\u62cd\u6444\u4e3b\u4f53\u7684\u4e09\u7ef4\u4f4d\u7f6e\u5750\u6807.","title":"Two-frame Structure from Motion"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#principle-induction","text":"Epipolar Geometry \u5bf9\u6781\u51e0\u4f55 \u5bf9\u6781\u51e0\u4f55\u63cf\u8ff0\u4e86\u4e00\u4e2a\u4e09\u7ef4\u70b9 \\(P\\) \u5728\u4e24\u4e2a\u89c6\u89d2\u7684\u4e8c\u7ef4\u6295\u5f71 \\(u_l, u_r\\) \u4e4b\u95f4\u7684\u51e0\u4f55\u5173\u7cfb. \u5e76\u901a\u8fc7\u8fd9\u4e2a\u51e0\u4f55\u5173\u7cfb\u5efa\u7acb\u4e24\u4e2a\u6444\u50cf\u673a\u4e4b\u95f4\u7684\u53d8\u6362\u5173\u7cfb\uff08\u5373\u7ed9\u51fa\u77e9\u9635 \\(R\\) \u548c \\(\\mathbf{t}\\) \uff09. Definition Epipole \u5bf9\u6781\u70b9 \uff1a\u4e00\u53f0\u6444\u50cf\u673a\u6295\u5f71\u5728\u53e6\u4e00\u53f0\u6444\u50cf\u673a\u4e2d\u7684\u70b9. \u5982\u56fe\u4e2d\u7684 \\(e_l\\) \u548c \\(e_r\\) . \u5bf9\u7ed9\u5b9a\u7684\u4e24\u53f0\u6444\u50cf\u673a\uff0c \\(e_l\\) \u548c \\(e_r\\) \u662f\u552f\u4e00\u7684. Epipolar Plane of Scene Point P \u5173\u4e8e P \u70b9\u7684\u5bf9\u6781\u9762 \uff1a\u7531 Scene Point \\(P\\) \u70b9\u548c\u4e24\u4e2a\u6444\u50cf\u673a \\(O_l\\) \u548c \\(O_r\\) \u5f62\u6210\u7684\u5e73\u9762. \u6bcf\u4e2a scene point \u6709\u552f\u4e00\u5bf9\u5e94\u7684\u5bf9\u6781\u9762. \u5bf9\u6781\u70b9\u5728\u5bf9\u6781\u9762\u4e0a.","title":"Principle Induction \u539f\u7406\u63a8\u5bfc"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#essential-matrix-e","text":"\u5bf9\u4e8e\u4e00\u4e2a\u5bf9\u6781\u9762\uff0c\u4ee5\u4e0b\u7b49\u5f0f\u5173\u7cfb\u6210\u7acb\uff1a \\[ \\begin{align} \\mathbf{n} = \\mathbf{t} \\times \\mathbf{x}_l \\\\ \\\\ \\mathbf{x}_l \\cdot (\\mathbf{t} \\times \\mathbf{x}_l) = 0 \\end{align} \\] \u5176\u4e2d \\(\\mathbf{n}\\) \u88ab\u79f0\u4e3a Normal Vector. \u5047\u8bbe\u53f3\u8fb9\u7684\u6444\u50cf\u673a\u76f8\u5bf9\u5de6\u8fb9\u7684\u6444\u50cf\u673a\u8fdb\u884c\u521a\u4f53\u53d8\u6362 + \u5e73\u79fb\uff0c\u5373\uff1a \\[ \\begin{align} \\mathbf{x}_l &= R \\mathbf{x}_r + \\mathbf{t} \\\\ \\\\ \\begin{bmatrix} x_l \\\\ y_l \\\\ z_l \\end{bmatrix} &= \\begin{bmatrix} r_{11} & r_{12} & r_{13} \\\\ r_{21} & r_{22} & r_{23} \\\\ r_{31} & r_{32} & r_{33} \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ y_r \\end{bmatrix} + \\begin{bmatrix} t_x \\\\ t_y \\\\ t_z \\end{bmatrix} \\end{align} \\] \u8fdb\u4e00\u6b65\u6f14\u7ece\u63a8\u7406\uff0c\u5f97\u5230\uff1a \\[ \\begin{align} \\begin{bmatrix} x_l & y_l & z_l \\end{bmatrix} \\begin{bmatrix} t_yz_l - t_zy_l \\\\ t_zx_l - t_xz_l \\\\ t_xy_l - t_yx_l \\end{bmatrix} = 0 & \\text{, Cross-product definition} \\\\ \\\\ \\begin{bmatrix} x_l & y_l & z_l \\end{bmatrix} \\underbrace{ \\begin{bmatrix} 0 & -t_z & t_y \\\\ t_z & 0 & -t_x \\\\ -t_y & t_x & 0 \\end{bmatrix} }_{T_\\times} \\begin{bmatrix} x_l \\\\ y_l \\\\ z_l \\end{bmatrix} = 0 & \\text{, Matrix-vector form} \\end{align} \\] \u4ee3\u5165\u53d8\u6362\u77e9\u9635 \\[ \\small \\begin{bmatrix} x_l & y_l & z_l \\end{bmatrix} \\left( \\underbrace{ \\begin{bmatrix} 0 & -t_z & t_y \\\\ t_z & 0 & -t_x \\\\ -t_y & t_x & 0 \\end{bmatrix} }_{T_\\times} \\underbrace{ \\begin{bmatrix} r_{11} & r_{12} & r_{13} \\\\ r_{21} & r_{22} & r_{23} \\\\ r_{31} & r_{32} & r_{33} \\end{bmatrix} }_{R} \\begin{bmatrix} x_r \\\\ y_r \\\\ y_r \\end{bmatrix} + \\underbrace{ \\begin{bmatrix} 0 & -t_z & t_y \\\\ t_z & 0 & -t_x \\\\ -t_y & t_x & 0 \\end{bmatrix} \\begin{bmatrix} t_x \\\\ t_y \\\\ t_z \\end{bmatrix} }_{\\mathbf{t} \\times \\mathbf{t} = \\mathbf{0}} \\right) = 0 \\] \\[ \\begin{bmatrix} x_l & y_l & z_l \\end{bmatrix} \\underbrace{ \\begin{bmatrix} e_{11} & e_{12} & e_{13} \\\\ e_{21} & e_{22} & e_{23} \\\\ e_{31} & e_{32} & e_{33} \\end{bmatrix} }_{\\text{Essential Matrix } E} \\begin{bmatrix} x_r \\\\ y_r \\\\ y_r \\end{bmatrix} \\text{, where } E = T_\\times R \\] \u6ce8\u610f\u5230 \\(T_\\times\\) \u662f\u53cd\u5bf9\u79f0\u77e9\u9635 (skew-symmetric matrix) \u800c \\(R\\) \u662f\u5355\u4f4d\u6b63\u4ea4\u77e9\u9635 (orthonomal matrix)\uff0c\u7531 SVD \u5206\u89e3 (Singule Value Decomposition)\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece \\(E\\) \u552f\u4e00\u5206\u89e3\u5f97\u5230 \\(T_\\times\\) \u548c \\(R\\) .","title":"Essential Matrix \\(E\\) \u57fa\u672c\u77e9\u9635"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#fundemental-matrix-f","text":"\u7531\u6295\u5f71\u5173\u7cfb\u4ee5\u53ca\u5185\u53c2\u77e9\u9635 \\(K\\) \uff0c\u5f97\u5230\uff1a \\[ \\small \\begin{align} \\text{Left Camera} && \\text{Right Camera} \\\\ z_l \\begin{bmatrix} u_l \\\\ v_l \\\\ 1 \\end{bmatrix} &= \\underbrace{ \\begin{bmatrix} f_x^{(l)} & 0 & o_x^{(l)} \\\\ 0 & f_y^{(l)} & o_y^{(l)} \\\\ 0 & 0 & 1 \\end{bmatrix} }_{K_l} \\begin{bmatrix} x_l \\\\ y_l \\\\ z_l \\end{bmatrix} & z_r \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} &= \\underbrace{ \\begin{bmatrix} f_x^{(r)} & 0 & o_x^{(r)} \\\\ 0 & f_y^{(r)} & o_y^{(r)} \\\\ 0 & 0 & 1 \\end{bmatrix} }_{K_r} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\end{bmatrix} \\\\ \\mathbf{x}_l^T &= \\begin{bmatrix} u_l & v_l & 1 \\end{bmatrix} z_l (K_l^{-1})^T & \\mathbf{x}_r &= K_r^{-1} z_r \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} \\end{align} \\] \u4ee3\u5165\u4ee5\u4e0a\u5f97\u5230\u7684\uff1a \\[ \\mathbf{x}^T_l E \\mathbf{x}_r = 0 \\] \u6709 \\[ \\require{canel} \\begin{bmatrix} u_l & v_l & 1 \\end{bmatrix} \\cancel{z_l} (K_l^{-1})^T E K_r^{-1} \\cancel{z_r} \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} = 0 \\] \u5373 \\[ \\begin{bmatrix} u_l & v_l & 1 \\end{bmatrix} F \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} = 0 \\text{, where } E = K_l^T F K_r \\]","title":"Fundemental Matrix \\(F\\) \u672c\u771f\u77e9\u9635"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#implementation","text":"","title":"Implementation \u5b9e\u73b0"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-1-find-a-set-m-pairs-of-corresponding-features-m","text":"Least Number of Points At least 8 pairs: \\((u_l^{(i)}, v_l^{(i)})\\) \u2194 \\((u_r^{(i)}, v_r^{(i)})\\) NOTE that one pair only corresponds one equation. (not the same as before)","title":"Step 1. Find a set (\\(m\\) pairs) of corresponding features. \u627e\u5230\u4e00\u7ec4\uff08\\(m\\) \u5bf9\uff09\u5339\u914d\u70b9."},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-2-build-linear-systems-and-solve-for-f-f","text":"\u5bf9\u4e8e\u6bcf\u7ec4\u5339\u914d \\(i\\) \uff0c \\[ \\begin{bmatrix} u_l^{(i)} & v_l^{(i)} & 1 \\end{bmatrix} \\begin{bmatrix} f_{11} & f_{12} & f_{13} \\\\ f_{21} & f_{22} & f_{23} \\\\ f_{31} & f_{32} & f_{33} \\end{bmatrix} \\begin{bmatrix} u_r^{(i)} \\\\ v_r^{(i)} \\\\ 1 \\end{bmatrix} = 0 \\] \u5c55\u5f00\u5f97\uff0c \\[ \\small \\left( f_{11} u_r^{(i)} + f_{12} v_r^{(i)} + f_13 \\right)u_l^{(i)} + \\left( f_{21} u_r^{(i)} + f_{22} v_r^{(i)} + f_23 \\right)v_l^{(i)} + f_{31} u_r^{(i)} + f_{32} v_r^{(i)} + f_33 = 0 \\] \u5bf9\u6240\u6709\u9009\u62e9\u7684\u70b9\uff0c\u6709 \\[ \\small \\begin{bmatrix} u_l^{(1)}u_r^{(1)} & u_l^{(1)}v_r^{(1)} & u_l^{(1)} & v_l^{(1)}u_r^{(1)} & v_l^{(1)}v_r^{(1)} & v_l^{(1)} & u_r^{(1)} & v_r^{(1)} & 1 \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ u_l^{(i)}u_r^{(i)} & u_l^{(i)}v_r^{(i)} & u_l^{(i)} & v_l^{(i)}u_r^{(i)} & v_l^{(i)}v_r^{(i)} & v_l^{(i)} & u_r^{(i)} & v_r^{(i)} & 1 \\\\ \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots & \\vdots \\\\ u_l^{(m)}u_r^{(m)} & u_l^{(m)}v_r^{(m)} & u_l^{(m)} & v_l^{(m)}u_r^{(m)} & v_l^{(m)}v_r^{(m)} & v_l^{(m)} & u_r^{(m)} & v_r^{(m)} & 1 \\\\ \\end{bmatrix} \\begin{bmatrix} f_{11} \\\\ f_{12} \\\\ f_{13} \\\\ f_{21} \\\\ f_{22} \\\\ f_{23} \\\\ f_{31} \\\\ f_{32} \\\\ f_{33} \\\\ \\end{bmatrix} = \\begin{bmatrix} 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\\\ 0 \\end{bmatrix} \\] \\[ A \\mathbf{f} = \\mathbf{0} \\] \u540c\u6837\u5730 \uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u51fa\u4e00\u5b9a\u7684\u9650\u5236 constraint. Option 1. \u4ee4 \\(f_{33} = 1\\) . Option 2. \u4ee4 \\(||f|| = 1\\) . \u5f97\u5230\u81ea\u7531\u5ea6\u4e3a \\(8\\) \uff0c\u81f3\u5c11\u9700\u8981 8 \u7ec4\u70b9. \u5e76\u540c\u6837\u8981\u6700\u5c0f\u5316 \\(||\\mathbf{Af - 0}|| = \\mathbf{||Af||}\\) . \u540c\u6837\u5982\u679c\u4f7f\u7528\u7684\u662f\u5411\u91cf\u8303\u6570\u4e3a \\(1\\) \u7684\u9650\u5236\uff0c\u90a3\u4e48\u89e3\u5c31\u662f \\(\\mathbf{A^{T}A}\\) \u6700\u5c0f\u7279\u5f81\u503c\u5bf9\u5e94\u7684\u7279\u5f81\u5411\u91cf.","title":"Step 2. Build linear systems and solve for \\(F\\). \u5efa\u7acb\u65b9\u7a0b\u7ec4\u5e76\u6c42\u89e3\u77e9\u9635 \\(F\\)."},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-3-find-e-and-extract-r-mathbft","text":"\\[ E = K_l^T F K_r \\] \u901a\u8fc7 SVD \u5206\u89e3\uff0c \\(E = T_\\times R\\) \u5f97\u5230 \\(T_\\times\\) \u548c \\(R\\) . \\(R\\) \u5373\u4e3a\u65cb\u8f6c\u77e9\u9635\uff0c \\(\\mathbf{t}\\) \u53ef\u4ee5\u901a\u8fc7 \\(T_\\times\\) \u76f4\u63a5\u5f97\u5230.","title":"Step 3. Find \\(E\\) and Extract \\(R, \\mathbf{t}\\)"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-4-find-3d-position-of-scene-points","text":"\u73b0\u5728\u5df2\u7ecf\u6709\u4ee5\u4e0b\u7b49\u5f0f \\[ \\small \\begin{align} \\text{Left Camera} \\\\ \\begin{bmatrix} u_l \\\\ v_l \\\\ 1 \\end{bmatrix} &= \\begin{bmatrix} f_x^{(l)} & 0 & o_x^{(l)} & 0 \\\\ 0 & f_y^{(l)} & o_y^{(l)} & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x_l \\\\ y_l \\\\ z_l \\\\ 1 \\end{bmatrix} ,\\ \\begin{bmatrix} x_l \\\\ y_l \\\\ z_l \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y \\\\ r_{31} & r_{32} & r_{33} & t_z \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\\\ 1 \\end{bmatrix} \\\\ \\begin{bmatrix} u_l \\\\ v_l \\\\ 1 \\end{bmatrix} &= \\begin{bmatrix} f_x^{(l)} & 0 & o_x^{(l)} & 0 \\\\ 0 & f_y^{(l)} & o_y^{(l)} & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} r_{11} & r_{12} & r_{13} & t_x \\\\ r_{21} & r_{22} & r_{23} & t_y \\\\ r_{31} & r_{32} & r_{33} & t_z \\\\ 0 & 0 & 0 & 1 \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\\\ 1 \\end{bmatrix} \\\\ \\\\ \\normalsize \\mathbf{\\tilde u}_l &= \\normalsize P_l \\mathbf{\\tilde x}_r \\\\ \\\\ \\small \\text{Right Camera} \\\\ \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} &= \\begin{bmatrix} f_x^{(r)} & 0 & o_x^{(r)} & 0 \\\\ 0 & f_y^{(r)} & o_y^{(r)} & 0 \\\\ 0 & 0 & 1 & 0 \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\\\ 1 \\end{bmatrix} \\\\ \\\\ \\normalsize \\mathbf{\\tilde u}_l &= \\normalsize M_{int_r} \\mathbf{\\tilde x}_r \\end{align} \\] \u7531 \\[ \\small \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} m_{11} & m_{12} & m_{13} & m_{14} \\\\ m_{21} & m_{22} & m_{23} & m_{24} \\\\ m_{31} & m_{32} & m_{33} & m_{34} \\\\ \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\\\ 1 \\end{bmatrix} ,\\ \\begin{bmatrix} u_r \\\\ v_r \\\\ 1 \\end{bmatrix} = \\begin{bmatrix} p_{11} & p_{12} & p_{13} & p_{14} \\\\ p_{21} & p_{22} & p_{23} & p_{24} \\\\ p_{31} & p_{32} & p_{33} & p_{34} \\\\ \\end{bmatrix} \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\\\ 1 \\end{bmatrix} \\] \u6574\u7406\u5f97 \\[ \\underbrace{ \\begin{bmatrix} u_r m_{31} - m_{11} & u_r m_{32} - m_{12} & u_r m_{33} - m_{13} \\\\ v_r m_{31} - m_{21} & v_r m_{32} - m_{22} & v_r m_{33} - m_{23} \\\\ u_l p_{31} - p_{11} & u_l p_{32} - p_{12} & u_l p_{33} - p_{13} \\\\ v_l p_{31} - p_{21} & v_l p_{32} - p_{22} & v_l p_{33} - p_{23} \\end{bmatrix} }_{A_{4\\times 3}} \\underbrace{ \\begin{bmatrix} x_r \\\\ y_r \\\\ z_r \\end{bmatrix} }_{\\mathbf{x}_r} = \\underbrace{ \\begin{bmatrix} m_{14} - m_{34} \\\\ m_{24} - m_{34} \\\\ p_{14} - p_{34} \\\\ p_{24} - p_{34} \\end{bmatrix} }_{\\mathbf{b}} \\] \u7531\u5206\u6790\u4e0a\u89e3\u7684\u552f\u4e00\u6027\uff0c\u7406\u8bba\u4e0a\u6709\u4e24\u884c\u662f\u7ebf\u6027\u76f8\u5173\u7684. \u4f46\u662f\u5728\u5b9e\u9645\u53d6\u70b9\u4e2d\u53ef\u80fd\u4f1a\u5b58\u5728\u4e00\u5b9a\u7684\u8bef\u5dee\uff0c\u6240\u4ee5\u4e3a\u4e86\u6700\u5927\u5316\u5229\u7528\u6570\u636e\u91cf\uff0c\u8fd8\u662f\u91c7\u7528\u6700\u5c0f\u4e8c\u4e58\u6cd5. \u7531\u6700\u5c0f\u4e8c\u4e58\u6cd5\u5f97\uff0c \\[ \\mathbf{x}_r = (A^TA)^{-1}A^T \\mathbf{b} \\] Non-linear Solution \u4e0a\u9762\u7684\u662f\u901a\u8fc7\u89e3\u7ebf\u6027\u7cfb\u7edf\u7684\u65b9\u6cd5\uff0c\u53e6\u4e00\u79cd\u60f3\u6cd5\u662f\u6700\u5c0f\u5316 \u91cd\u6620\u5c04\u8bef\u5dee (reprojection error) . \\[ \\text{cost}(P) = \\text{dist}(\\mathbf{u}_l, \\mathbf{\\hat u}_l)^2 + \\text{dist}(\\mathbf{u}_r, \\mathbf{\\hat u}_r)^2 \\] \u53e6\u5916\uff0c\u901a\u8fc7\u8fd9\u79cd\u65b9\u6cd5\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f18\u5316 \\(R\\) \u548c \\(\\mathbf{t}\\) .","title":"Step 4. Find 3D Position of Scene Points"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#multi-frame-structure-from-motion","text":"\u4e0e Two-frame SfM \u7c7b\u4f3c\uff0c\u5df2\u77e5 \\(m\\) \u5f20\u56fe\u50cf\uff0c \\(n\\) \u4e2a\u4e09\u7ef4\u70b9\u4ee5\u53ca\u76f8\u673a\u5185\u53c2\u77e9\u9635\uff0c\u6c42\u76f8\u673a\u7684\u4f4d\u7f6e\u4ee5\u53ca\u6240\u62cd\u6444\u4e3b\u4f53\u7684\u4e09\u7ef4\u4f4d\u7f6e\u5750\u6807. \u4e5f\u5c31\u662f\u5bf9\u4e8e\u4ee5\u4e0b\u7b49\u5f0f\uff1a \\[ \\mathbf{u}_j^{(i)} = P_{proj}^{(i)} \\mathbf{P}_j \\text{, where } i = 1, \\dots, m, j = 1, \\dots, n \\] \u7531 \\(mn\\) \u4e2a\u6295\u5f71\u7684\u4e8c\u7ef4\u70b9 \\(\\mathbf{u}_j^{(i)}\\) \u6c42\u89e3 \\(m\\) \u4e2a\u6295\u5f71\u77e9\u9635 \\(P_{proj}^{(i)}\\) \u4e0e \\(n\\) \u4e2a\u4e09\u7ef4\u70b9\u5750\u6807 \\(P_j\\) .","title":"Multi-frame Structure from Motion"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#solution-sequential-structrue-from-motion","text":"","title":"Solution: Sequential Structrue from Motion"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-1-initialize-camera-motion-and-scene-structure","text":"\u9996\u5148\u9009\u4e24\u5f20\u56fe\u505a\u4e00\u6b21 Two-frame SfM.","title":"Step 1. Initialize camera motion and scene structure. \u521d\u59cb\u5316"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-2-deal-with-an-addition-view","text":"\u5bf9\u4e8e\u6bcf\u65b0\u589e\u7684\u4e00\u5f20\u56fe\uff0c \u5bf9\u4e8e\u5df2\u7ecf\u5efa\u7acb\u4e09\u7ef4\u5750\u6807\u7684\u70b9\uff1a PnP \u95ee\u9898 . \u5bf9\u4e8e\u5c1a\u672a\u5efa\u7acb\u4e09\u7ef4\u5750\u6807\u7684\u70b9\uff1a\u505a Two-frame SfM.","title":"Step 2. Deal with an addition view. \u5904\u7406\u4e0b\u4e00\u5f20\u56fe"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#step-3-refine-structure-and-motion-bundle-adjustment","text":"\u5904\u7406\u5b8c\u6240\u6709\u7684\u56fe\u540e\uff0c\u518d\u901a\u8fc7\u4e00\u6b21 \u96c6\u675f\u8c03\u6574 \uff08\u5177\u4f53\u5b9e\u73b0\u662f LM \u7b97\u6cd5 \uff09\u5bf9\u4e09\u7ef4\u70b9\u5750\u6807\u548c\u76f8\u673a\u53c2\u6570\u505a\u8fdb\u4e00\u6b65\u4f18\u5316\uff0c\u5373\u6700\u5c0f\u5316 \u91cd\u6620\u5c04\u8bef\u5dee \uff08\u975e\u7ebf\u6027\u6700\u5c0f\u4e8c\u4e58\uff09\uff1a \\[ E(P_{proj}, \\mathbf{P}) = \\sum\\limits_{i=1}^m \\sum\\limits_{j=1}^n \\text{dist} \\left( u_j^{(i)}, P_{proj}^{(i)} \\mathbf{P}_j \\right)^2 \\]","title":"Step 3. Refine structure and motion: Bundle Adjustment. \u96c6\u675f\u8c03\u6574"},{"location":"Computer_Science_Courses/ICV/7_Structure_from_Motion/#colmap","text":"COLMAP is a general-purpose Structure-from-Motion (SfM) and Multi-View Stereo (MVS) pipeline with a graphical and commandline interface. It offers a wide range of features for reconstruction of ordered and unordered image collections. Pipeline","title":"COLMAP"},{"location":"Computer_Science_Courses/ICV/8_Depth_Estimation_and_3D_Reconstruction/","text":"","title":"Lecture 8"},{"location":"Computer_Science_Courses/ICV/9_Deep_Learning/","text":"","title":"Lecture 9"}]}